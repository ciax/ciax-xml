<?xml version="1.0" encoding="iso-8859-1"?>
<cdb xsi:schemaLocation="http://ciax.sum.naoj.org/ciax-xml/schema/cdb.xsd" xmlns="http://ciax.sum.naoj.org/ciax-xml/cdb" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <class device="mel" id="mel" label="Cart PLC">
    <commands>
      <session id="upd" label="Regular status update">
        <statement format="getstat"></statement>
        <statement format="chken"></statement>
      </session>
      <session id="start_run" label="Running Start">
        <statement format="start 1"></statement>
      </session>
      <session id="start_jak" label="Jacking Start">
        <statement format="start %d">
          <argv>0x100</argv>
        </statement>
      </session>
      <session id="clear_trg" label="Jacking Start">
        <statement format="clear"></statement>
      </session>
      <session id="set_fwd" label="Set Tag to Forward">
        <statement format="set_tag 98"></statement>
      </session>
      <session id="set_run1" label="Run to Tag 1">
        <statement format="set_tag 1"></statement>
      </session>
      <session id="set_jak1" label="Jack UP Level 1">
        <statement format="set_pos 2"></statement>
      </session>
      <session id="pause" label="Pause">
        <statement format="stop 0"></statement>
      </session>
      <session id="emstop" label="Emergency Stop">
        <statement format="stop 1"></statement>
      </session>
      <session id="resume" label="Resume from Pause">
        <statement format="clear"></statement>
      </session>
      <session id="get_tbl" label="Get Jack Table">
        <repeat counter="t" from="0" to="5">
          <repeat counter="j" from="0" to="3">
            <statement format="get_tbl %d %d">
              <argv>$t</argv>
              <argv>$j</argv>
            </statement>
          </repeat>
        </repeat>
      </session>
      <session id="set_tbl" label="Set Jack Table">
        <repeat counter="t" from="0" to="5">
          <repeat counter="j" from="0" to="3">
            <statement format="set_tbl %d %d">
              <argv>$t</argv>
              <argv>$j</argv>
            </statement>
          </repeat>
        </repeat>
      </session>
      <session id="tbl_read" label="Resume from Pause">
        <statement format="tbl_rw 1"></statement>
      </session>
      <session id="tbl_write" label="Resume from Pause">
        <statement format="tbl_rw 2"></statement>
      </session>
    </commands>
    <status>
      <value format="%04X" id="ecode" label="EXIT CODE">
        <int ref="ecode" />
      </value>
      <value format="%s" id="rdy" label="READY">
        <binary bit="0" ref="x:0" />
      </value>
      <value format="%s" id="pse" label="PAUSE">
        <binary bit="1" ref="x:0" />
      </value>
      <value format="%s" id="emg" label="ENERGENCY">
        <binary bit="2" ref="x:0" />
      </value>
      <value format="%s" id="stp" label="STOP">
        <binary bit="3" ref="x:0" />
      </value>
      <value format="%s" id="run" label="RUNNING">
        <binary bit="4" ref="x:0" />
      </value>
      <value format="%s" id="jak" label="JACKING">
        <binary bit="5" ref="x:0" />
      </value>
      <value format="%s" id="con" label="CHARGING">
        <binary bit="6" ref="x:0" />
      </value>
      <value format="%s" id="flt" label="Fault">
        <binary bit="7" ref="x:0" />
      </value>
      <value format="%s" id="msr" label="Right Motor Servo">
        <binary bit="8" inv="true" ref="x:0" />
      </value>
      <value format="%s" id="msl" label="Left Motor Servo">
        <binary bit="9" inv="true" ref="x:0" />
      </value>
      <value format="%s" id="jd1" label="Jack Motor Servo1">
        <binary bit="10" inv="true" ref="x:0" />
      </value>
      <value format="%s" id="jd2" label="Jack Motor Servo2">
        <binary bit="11" inv="true" ref="x:0" />
      </value>
      <value format="%s" id="jd3" label="Jack Motor Servo3">
        <binary bit="12" inv="true" ref="x:0" />
      </value>
      <value format="%s" id="jd4" label="Jack Motor Servo4">
        <binary bit="13" inv="true" ref="x:0" />
      </value>
      <value format="%d" id="mdar" label="Rignt Motor D/A">
        <int ref="x:7" signed="true" />
      </value>
      <value format="%d" id="mdal" label="Left Motor D/A">
        <int ref="x:8" signed="true" />
      </value>
      <value format="%2.2f" id="bvl" label="Battery Voltage">
        <float decimal="2" ref="x:22" />
      </value>
      <value format="%d" id="ist" label="Instrument">
        <int ref="x:23" />
      </value>
      <value format="%d" id="cpos" label="Current Position">
        <int ref="x:25" />
      </value>
      <value format="%d" id="dpos" label="Destination Position">
        <int ref="x:26" />
      </value>
      <value format="%d" id="jpos" label="Jack Position">
        <int ref="x:27" />
      </value>
    </status>
  </class>
</cdb>