<?xml version="1.0" encoding="utf-8"?>
<fdb xmlns="http://ciax.sum.naoj.org/ciax-xml/fdb">
  <frame id="ken" label="Kenwood PW-A Series (IF-41RS)" reference="http://ciax.sum.naoj.org/man/kenwood/PWA_m_j.pdf" ccmethod="sum" maxlength="255" version="5" wait="0.5">
    <serial databit="7" flowctl="NONE" parity="EVEN" speed="9600" stopbit="1" />
    <cmdframe xmlns="http://ciax.sum.naoj.org/ciax-xml/fdbc">
      <char length="1" label="ENQ">5</char>
      <ccrange>
        <body/>
        <char length="1" label="ETX">3</char>
      </ccrange>
      <string format="%02X">${cc}</string>
    </cmdframe>
    <commands xmlns="http://ciax.sum.naoj.org/ciax-xml/fdbc">
      <item id="getid" label="Get Unit ID(NEW)" type="stat" response="getstat">
        <par_num>0:2</par_num>
        <char length="1">$1+0x41</char>
        <string>PWID</string>
      </item>
      <item id="getst0" label="Get Status in INT [UNIT] [N of CH]" type="stat" response="getst0">
        <par_num>0:2</par_num>
        <par_num>1:4</par_num>
        <char length="1">$1+0x41</char>
        <string>ST0</string>
      </item>
      <item id="getst1" label="Get Presets(NEW) in INT [UNIT] [N of CH]" type="stat" response="getst1">
        <par_num>0:2</par_num>
        <par_num>1:4</par_num>
        <char length="1">$1+0x41</char>
        <string>ST1</string>
      </item>
      <item id="getst1o" label="Get Presets(OLD) in INT [UNIT] [N of CH]" type="stat" response="getst1o">
        <par_num>0:2</par_num>
        <par_num>1:4</par_num>
        <char length="1">$1+0x41</char>
        <string>ST1</string>
      </item>
      <item id="getst2" label="Get status(NEW) [UNIT] [N of CH]" type="stat" response="getst2">
        <par_num>0:2</par_num>
        <par_num>1:4</par_num>
        <char length="1">$1+0x41</char>
        <string>ST2</string>
      </item>
      <item id="getst2o" label="Get status(OLD) [UNIT] [N of CH]" type="stat" response="getst2o">
        <par_num>0:2</par_num>
        <par_num>1:4</par_num>
        <char length="1">$1+0x41</char>
        <string>ST2</string>
      </item>
      <item id="getst3" label="Get status(NEW) [UNIT]" type="stat" response="getst3">
        <par_num>0:2</par_num>
        <char length="1">$1+0x41</char>
        <string>ST3</string>
      </item>
      <item id="getst4" label="Get Status(NEW) in Float [UNIT] [N of CH]" type="stat" response="getst4">
        <par_num>0:2</par_num>
        <par_num>1:4</par_num>
        <char length="1">$1+0x41</char>
        <string>ST4</string>
      </item>
      <item id="getst5" label="Get Presets(NEW) in Float [UNIT] [N of CH]" type="stat" response="getst5">
        <par_num>0:2</par_num>
        <par_num>1:4</par_num>
        <char length="1">$1+0x41</char>
        <string>ST5</string>
      </item>
      <item id="aon" label="All Output ON" response="default" type="action">
        <string>#SW1</string>
      </item>
      <item id="ack" label="ACK" noaffix="true" response="ack">
        <char length="1" label="ACK">6</char>
        <string>@</string>
      </item>
      <item id="clr" label="ACK" noaffix="true" response="default">
        <char length="1" label="ACK">6</char>
        <string>@</string>
      </item>
      <item id="rcv" label="Rcv Status" response="getstat" />
    </commands>
    <rspframe xmlns="http://ciax.sum.naoj.org/ciax-xml/fdbr"  terminator="\x03">
      <echo/>
      <field length="1" decode="unsigned" label="ACK">6</field>
      <field length="1" label="DST CH"/>
      <field length="1" decode="unsigned" label="ENQ">5</field>
      <ccrange>
        <field label="SRC CH">@</field>
        <body/>
        <field length="1" decode="unsigned" label="ETX">3</field>
      </ccrange>
      <field assign="cc" decode="hexstr" length="2" label="CC"/>
    </rspframe>
    <responses xmlns="http://ciax.sum.naoj.org/ciax-xml/fdbr">
      <response id="ack" noaffix="true">
        <field label="ACK" decode="unsigned" length="1">6</field>
        <field label="Master CH">@</field>
      </response>
      <response id="getstat">
        <array assign="id" label="Value" delimiter=",">
          <index range="$1" size="3" />
          <index size="5" />
        </array>
      </response>
      <response id="getst0">
        <field label="StatusCode">MS0,0</field>
        <field label="UNIT #">$1+1</field>
        <field label="Delimiter">,</field>
        <array assign="ms0" label="Value" delimiter=",">
          <index range="$1" size="3" />
          <index range="0:$2-1" size="4" />
          <index size="2" />
        </array>
        <array assign="st0" label="Stat" length="1" decode="hexstr">
          <index range="$1" size="3" />
          <index size="4" />
        </array>
      </response>
      <response id="getst1">
        <field label="StatusCode">MS1,0</field>
        <field label="UNIT #">$1+1</field>
        <field label="Delimiter">,</field>
        <array assign="ms1" label="Value" delimiter=",">
          <!--Unit-->
          <index range="$1" size="3" />
          <!--Preset-->
          <index size="4" />
          <!--CH-->
          <index range="0:$2*2-1" size="11" />
        </array>
      </response>
      <response id="getst1o">
        <field label="StatusCode">MS1,0</field>
        <field label="UNIT #">$1+1</field>
        <field label="Delimiter">,</field>
        <array assign="ms1" label="Value" delimiter=",">
          <!--Unit-->
          <index range="$1" size="3" />
          <!--Preset-->
          <index size="4" />
          <!--CH-->
          <index range="0:$2*2+2" size="11" />
        </array>
      </response>
      <response id="getst2">
        <field label="StatusCode">MS2,0</field>
        <field label="UNIT #">$1+1</field>
        <field label="Delimiter">,</field>
        <array assign="ms2" label="Value" delimiter="," decode="binstr">
          <index range="$1" size="3" />
          <index range="0:5" size="8" />
        </array>
        <array assign="tr2" label="Value" delimiter=",">
          <index range="$1" size="3" />
          <index range="0:$2*2-1" size="8" />
        </array>
        <array assign="ms2" label="Value" delimiter=",">
          <index range="$1" size="3"/>
          <index range="6:7" size="8"/>
        </array>
        <array assign="dly2" label="Value" delimiter=",">
          <index range="$1" size="3" />
          <index range="0:$2-1" size="4" />
        </array>
      </response>
      <response id="getst2o">
        <field label="StatusCode">MS2,0</field>
        <field label="UNIT #">$1+1</field>
        <field label="Delimiter">,</field>
        <array assign="ms2" label="Value" delimiter=",">
          <index range="$1" size="3" />
          <index range="0:4" size="8" />
        </array>
      </response>
      <response id="getst3">
        <field label="StatusCode">MS3,0</field>
        <field label="UNIT #">$1+1</field>
        <field label="Delimiter">,</field>
        <array assign="ms3" label="Value" delimiter=",">
          <index range="$1" size="3" />
        </array>
      </response>
      <response id="getst4">
        <field label="StatusCode">MS4,0</field>
        <field label="UNIT #">$1+1</field>
        <field label="Delimiter">,</field>
        <array assign="ms4" label="Value" delimiter=",">
          <index range="$1" size="3" />
          <index range="0:$2*2-1" size="8" />
        </array>
        <array assign="st0" label="Stat" length="1" decode="hexstr">
          <index range="$1" size="3" />
          <index size="4" />
        </array>
      </response>
      <response id="getst5">
        <field label="StatusCode">MS5,0</field>
        <field label="UNIT #">$1+1</field>
        <field label="Delimiter">,</field>
        <array assign="ms5" label="Value" delimiter=",">
          <index range="$1" size="3" />
          <index size="14" />
        </array>
      </response>
      <response id="default"  noaffix="true"/>
    </responses>
  </frame>
</fdb>
