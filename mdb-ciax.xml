<?xml version="1.0" encoding="utf-8"?>
<mdb xmlns="http://ciax.sum.naoj.org/ciax-xml/mdb">
  <macro id="ciax" version="1" label="Cart Macro" host="ciax" port="55554">
    <group id="g_upd" caption="Update Commands" rank="0">
      <unit id="unit_upd" label="Update All Devices">
        <item id="upd" label="Update All Devices">
          <upd site="dts"/>
          <upd site="crt"/>
          <upd site="dso"/>
          <upd site="dsi"/>
          <upd site="cci"/>
          <upd site="cco"/>
        </item>
      </unit>
    </group>
    <!--Exchange Commands-->
    <group id="g_exchg" caption="Exchange Commands" rank="1">
      <unit id="unit_exchg" label="Exhange Instrument">
        <item id="ex_focas" label="Exchange to FOCAS">
          <mcr name="depart"/>
          <mcr name="fetch"/>
          <mcr name="r2fi"/>
          <mcr name="deliver"/>
          <mcr name="return"/>
        </item>
        <item id="ex_moircs" label="Exchange to MOIRCS">
          <mcr name="depart"/>
          <mcr name="fetch"/>
          <mcr name="r2mi"/>
          <mcr name="deliver"/>
          <mcr name="return"/>
        </item>
        <item id="ex_comics" label="Exchange to COMICS">
          <mcr name="depart"/>
          <mcr name="fetch"/>
          <mcr name="r2mo"/>
          <mcr name="deliver"/>
          <mcr name="return"/>
        </item>
        <item id="ex_k3d" label="Exchange to Kyoto3D">
          <mcr name="depart"/>
          <mcr name="fetch"/>
          <mcr name="r2fo"/>
          <mcr name="deliver"/>
          <mcr name="return"/>
        </item>
      </unit>
    </group>
    <!--Abstract Commands-->
    <group id="g_abstract" caption="Abstract Commands" rank="0">
      <unit id="unit_dprt" label="Run to CAS">
        <item id="depart" label="Depart from Home">
          <select site="crt" var="cps" form="data">
            <option val="10">
              <mcr name="rdpo"/>
            </option>
            <option val="12">
              <mcr name="rdpi"/>
            </option>
          </select>
        </item>
        <item id="return" label="Return to Home">
          <select site="crt" var="ist" form="msg">
            <option val="COMICS">
              <mcr name="rrto"/>
            </option>
            <option val="MCS">
              <mcr name="rrto"/>
            </option>
            <option val="FOCAS">
              <mcr name="trti"/>
            </option>
            <option val="MOIRCS">
              <mcr name="rrti"/>
            </option>
          </select>
        </item>
      </unit>
      <unit id="unit_getset" label="Transport to/from CAS">
        <item id="fetch" label="Fetch from CAS">
          <select site="crt" var="ist" form="msg">
            <option val="COMICS">
              <mcr name="hmi"/>
            </option>
            <option val="MCS">
              <mcr name="hfo"/>
            </option>
            <option val="FOCAS">
              <mcr name="hfi"/>
            </option>
            <option val="MOIRCS">
              <mcr name="hmi"/>
            </option>
          </select>
        </item>
        <item id="deliver" label="Deliver to CAS">
          <select site="crt" var="ist" form="msg">
            <option val="COMICS">
              <mcr name="cmi"/>
            </option>
            <option val="MCS">
              <mcr name="cfo"/>
            </option>
            <option val="FOCAS">
              <mcr name="cfi"/>
            </option>
            <option val="MOIRCS">
              <mcr name="cmi"/>
            </option>
          </select>
        </item>
      </unit>
      <unit id="unit_r2f" title="r2[f|m][o|i]" label="Run to Flanges">
        <item id="r2fo" label="Run to FIX.OPT">
          <select site="crt" var="cps" form="data">
            <option val="9">
              <mcr name="rsfo"/>
            </option>
            <option val="11">
              <mcr name="rxfo"/>
            </option>
            <option val="12">
              <mcr name="rtfo"/>
            </option>
          </select>
        </item>
        <item id="r2mo" label="Run to MOV.OPT">
          <select site="crt" var="cps" form="data">
            <option val="10">
              <mcr name="rsmo"/>
            </option>
            <option val="11">
              <mcr name="rtmo"/>
            </option>
            <option val="12">
              <mcr name="rxmo"/>
            </option>
          </select>
        </item>
        <item id="r2mi" label="Run to MOV.IR">
          <select site="crt" var="cps" form="data">
            <option val="9">
              <mcr name="rtmi"/>
            </option>
            <option val="10">
              <mcr name="rxmi"/>
            </option>
            <option val="12">
              <mcr name="rsmi"/>
            </option>
          </select>
        </item>
        <item id="r2fi" label="Run to FIX.IR">
          <select site="crt" var="cps" form="data">
            <option val="9">
              <mcr name="rxfi"/>
            </option>
            <option val="10">
              <mcr name="rtfi"/>
            </option>
            <option val="11">
              <mcr name="rsfi"/>
            </option>
          </select>
        </item>
      </unit>
    </group>
    <!--Select by Position Commands-->
    <group id="g_select" caption="Select Commands" rank="0">
      <unit id="unit_sel_atdt" label="Attach/Detach">
        <item id="attach" label="Attach to Frange">
          <select site="crt" var="dps" form="data">
            <option val="1">
              <mcr name="atcs"/>
            </option>
            <option val="9">
              <mcr name="atmo"/>
            </option>
            <option val="10">
              <mcr name="atfo"/>
            </option>
            <option val="11">
              <mcr name="atmi"/>
            </option>
            <option val="12">
              <mcr name="atfi"/>
            </option>
          </select>
        </item>
        <item id="detach" label="Detach from Frange">
          <select site="crt" var="dps" form="data">
            <option val="1">
              <mcr name="dtcs"/>
            </option>
            <option val="9">
              <mcr name="dtmo"/>
            </option>
            <option val="10">
              <mcr name="dtfo"/>
            </option>
            <option val="11">
              <mcr name="dtmi"/>
            </option>
            <option val="12">
              <mcr name="dtfi"/>
            </option>
          </select>
        </item>
      </unit>
    </group>
    <!--Sequential Instrument Moving Commands-->
    <group id="g_mvi" caption="Sequential Instrument Moving Commands" rank="1">
      <unit id="unit_home" title="h[f|m][i|o]" label="Move Inst from CAS to Home">
        <item id="hfo" label="Move Inst from CAS to FIX.OPT">
          <goal label="Inst in position?">
            <equal form="data" site="crt" var="cps">10</equal>
            <equal form="msg" site="dso" var="fis">ON</equal>
          </goal>
          <mcr name="dtcs"/>
          <mcr name="tocs"/>
          <mcr name="tifo"/>
          <mcr name="atfo"/>
        </item>
        <item id="hmo" label="Move Inst from CAS to MOV.OPT">
          <goal label="Inst in position?">
            <equal form="data" site="crt" var="cps">9</equal>
            <equal form="msg" site="dso" var="mis">ON</equal>
          </goal>
          <mcr name="dtcs"/>
          <mcr name="tocs"/>
          <mcr name="timo"/>
          <mcr name="atmo"/>
        </item>
        <item id="hfi" label="Move Inst from CAS to FIX.IR">
          <goal label="Inst in position?">
            <equal form="data" site="crt" var="cps">12</equal>
            <equal form="msg" site="dsi" var="fis">ON</equal>
          </goal>
          <mcr name="dtcs"/>
          <mcr name="tocs"/>
          <mcr name="tifi"/>
          <mcr name="atfi"/>
        </item>
        <item id="hmi" label="Move Inst from CAS to MOV.IR">
          <goal label="Inst in position?">
            <equal form="data" site="crt" var="cps">11</equal>
            <equal form="msg" site="dsi" var="mis">ON</equal>
          </goal>
          <mcr name="dtcs"/>
          <mcr name="tocs"/>
          <mcr name="timi"/>
          <mcr name="atmi"/>
        </item>
      </unit>
      <unit id="unit_cas" title="c[f|m][i|o]" label="Move Inst from Home to CAS">
        <item id="cfo" label="Move Inst from FIX.OPT to CAS">
          <goal label="Inst in position?">
            <equal form="data" site="crt" var="cps">1</equal>
            <equal form="msg" site="dts" var="cis">ON</equal>
          </goal>
          <mcr name="dtfo"/>
          <mcr name="tofo"/>
          <mcr name="tics"/>
          <mcr name="atcs"/>
        </item>
        <item id="cmo" label="Move Inst from MOV.OPT to CAS">
          <goal label="Inst in position?">
            <equal form="data" site="crt" var="cps">1</equal>
            <equal form="msg" site="dts" var="cis">ON</equal>
          </goal>
          <check label="CART on PATH?">
            <not form="data" site="crt" var="cps">10</not>
          </check>
          <mcr name="dtmo"/>
          <mcr name="tomo"/>
          <mcr name="tics"/>
          <mcr name="atcs"/>
        </item>
        <item id="cfi" label="Move Inst from FIX.IR to CAS">
          <goal label="Inst in position?">
            <equal form="data" site="crt" var="cps">1</equal>
            <equal form="msg" site="dts" var="cis">ON</equal>
          </goal>
          <mcr name="dtfi"/>
          <mcr name="tofi"/>
          <mcr name="tics"/>
          <mcr name="atcs"/>
        </item>
        <item id="cmi" label="Move Inst from MOV.IR to CAS">
          <goal label="Inst in position?">
            <equal form="data" site="crt" var="cps">1</equal>
            <equal form="msg" site="dts" var="cis">ON</equal>
          </goal>
          <check label="CART on PATH?">
            <not form="data" site="crt" var="cps">12</not>
          </check>
          <mcr name="dtmi"/>
          <mcr name="tomi"/>
          <mcr name="tics"/>
          <mcr name="atcs"/>
        </item>
      </unit>
    </group>
    <!--Sequential Free Run Commands (End Flange Base)-->
    <group id="g_sfr" caption="Sequential Free Run Commands" rank="1">
      <unit id="unit_rssf" title="rs[f|m][o|i]" label="Run between Same Side Flanges">
        <item id="rsfo" label="Run Tag 9 to 10 w/o Inst">
          <goal label="Cart on Destination?">
            <equal form="data" site="crt" var="cps">10</equal>
          </goal>
          <check label="CART Lift Down?">
            <equal form="msg" site="crt" var="jlv">D</equal>
          </check>
          <mcr name="romo"/>
          <mcr name="stmo"/>
          <mcr name="rifo"/>
        </item>
        <item id="rsmo" label="Run Tag 10 to 9 w/o Inst">
          <goal label="Cart on Destination?">
            <equal form="data" site="crt" var="cps">9</equal>
          </goal>
          <check label="CART Lift Down?">
            <equal form="msg" site="crt" var="jlv">D</equal>
          </check>
          <mcr name="rofo"/>
          <mcr name="ldmo"/>
          <mcr name="rimo"/>
        </item>
        <item id="rsfi" label="Run Tag 11 to 12 w/o Inst">
          <goal label="Cart on Destination?">
            <equal form="data" site="crt" var="cps">12</equal>
          </goal>
          <check label="CART Lift Down?">
            <equal form="msg" site="crt" var="jlv">D</equal>
          </check>
          <mcr name="romi"/>
          <mcr name="stmi"/>
          <mcr name="rifi"/>
        </item>
        <item id="rsmi" label="Run Tag 12 to 11 w/o Inst">
          <goal label="Cart on Destination?">
            <equal form="data" site="crt" var="cps">11</equal>
          </goal>
          <check label="CART Lift Down?">
            <equal form="msg" site="crt" var="jlv">D</equal>
          </check>
          <mcr name="rofi"/>
          <mcr name="ldmi"/>
          <mcr name="rimi"/>
        </item>
      </unit>
      <unit id="unit_rxsf" title="rx[f|m][o|i]" label="Run between Cross Side/Type Flanges">
        <item id="rxfi" label="Run Tag 9 to 12 w/o Inst">
          <goal label="Cart on Destination?">
            <equal form="data" site="crt" var="cps">12</equal>
          </goal>
          <check label="CART Lift Down?">
            <equal form="msg" site="crt" var="jlv">D</equal>
          </check>
          <mcr name="stmi" async="true"/>
          <mcr name="romo"/>
          <mcr name="stmo" async="true"/>
          <mcr name="runw">
            <argv>8</argv>
          </mcr>
          <mcr name="rifi"/>
        </item>
        <item id="rxmo" label="Run Tag 12 to 9 w/o Inst">
          <goal label="Cart on Destination?">
            <equal form="data" site="crt" var="cps">9</equal>
          </goal>
          <check label="CART Lift Down?">
            <equal form="msg" site="crt" var="jlv">D</equal>
          </check>
          <mcr name="ldmo" async="true"/>
          <mcr name="rofi"/>
          <mcr name="runw">
            <argv>7</argv>
          </mcr>
          <mcr name="rimo"/>
        </item>
        <item id="rxfo" label="Run Tag 11 to 10 w/o Inst">
          <goal label="Cart on Destination?">
            <equal form="data" site="crt" var="cps">10</equal>
          </goal>
          <check label="CART Lift Down?">
            <equal form="msg" site="crt" var="jlv">D</equal>
          </check>
          <mcr name="stmo" async="true"/>
          <mcr name="romi"/>
          <mcr name="stmi" async="true"/>
          <mcr name="runw">
            <argv>7</argv>
          </mcr>
          <mcr name="rifo"/>
        </item>
        <item id="rxmi" label="Run Tag 10 to 11 w/o Inst">
          <goal label="Cart on Destination?">
            <equal form="data" site="crt" var="cps">11</equal>
          </goal>
          <check label="CART Lift Down?">
            <equal form="msg" site="crt" var="jlv">D</equal>
          </check>
          <mcr name="ldmi" async="true"/>
          <mcr name="rofo"/>
          <mcr name="runw">
            <argv>8</argv>
          </mcr>
          <mcr name="rimi"/>
        </item>
      </unit>
      <unit id="unit_rtsf" title="rt[f|m][o|i]" label="Run between Same Type Flanges">
        <item id="rtfi" label="Run Tag 10 to 12 w/o Inst">
          <goal label="Cart on Destination?">
            <equal form="data" site="crt" var="cps">12</equal>
          </goal>
          <check label="CART Lift Down?">
            <equal form="msg" site="crt" var="jlv">D</equal>
          </check>
          <mcr name="stmi" async="true"/>
          <mcr name="rofo"/>
          <mcr name="runw">
            <argv>8</argv>
          </mcr>
          <mcr name="rifi"/>
        </item>
        <item id="rtfo" label="Run Tag 12 to 10 w/o Inst">
          <goal label="Cart on Destination?">
            <equal form="data" site="crt" var="cps">10</equal>
          </goal>
          <check label="CART Lift Down?">
            <equal form="msg" site="crt" var="jlv">D</equal>
          </check>
          <mcr name="stmo" async="true"/>
          <mcr name="rofi"/>
          <mcr name="runw">
            <argv>7</argv>
          </mcr>
          <mcr name="rifo"/>
        </item>
        <item id="rtmi" label="Run Tag 9 to 11 w/o Inst">
          <goal label="Cart on Destination?">
            <equal form="data" site="crt" var="cps">11</equal>
          </goal>
          <check label="CART Lift Down?">
            <equal form="msg" site="crt" var="jlv">D</equal>
          </check>
          <mcr name="ldmi" async="true"/>
          <mcr name="romo"/>
          <mcr name="stmo" async="true"/>
          <mcr name="runw">
            <argv>8</argv>
          </mcr>
          <mcr name="rimi"/>
        </item>
        <item id="rtmo" label="Run Tag 11 to 9 w/o Inst">
          <goal label="Cart on Destination?">
            <equal form="data" site="crt" var="cps">9</equal>
          </goal>
          <check label="CART Lift Down?">
            <equal form="msg" site="crt" var="jlv">D</equal>
          </check>
          <mcr name="ldmo" async="true"/>
          <mcr name="romi"/>
          <mcr name="stmi" async="true"/>
          <mcr name="runw">
            <argv>7</argv>
          </mcr>
          <mcr name="rimo"/>
        </item>
      </unit>
    </group>
    <!--Sequential Attach/Detach Commands-->
    <group id="g_atdt" caption="Sequential Attach/Detach Commands" rank="1">
      <unit id="unit_atfo" title="[a|d]tfo" label="Attach/Detach FIX.OPT">
        <item id="atfo" label="Attach at FIX.OPT">
          <bypass label="CART ON FIX.OPT?">
            <not form="data" site="crt" var="dps">10</not>
          </bypass>
          <goal label="Instrument ON?">
            <equal form="msg" site="dso" var="fis">ON</equal>
            <equal form="msg" site="crt" var="jlv">D</equal>
          </goal>
          <mcr name="lft1"/>
          <mcr name="lft2"/>
          <mcr name="lft3"/>
          <mcr name="fcfo"/>
          <mcr name="lft0"/>
        </item>
        <item id="dtfo" label="Detach at FIX.OPT">
          <bypass label="CART ON FIX.OPT?">
            <not form="data" site="crt" var="dps">10</not>
          </bypass>
          <goal label="Instrument OFF?">
            <equal form="msg" site="dso" var="fis">OFF</equal>
            <equal form="msg" site="crt" var="jlv">D</equal>
          </goal>
          <mcr name="k3d"/>
          <mcr name="lft1"/>
          <mcr name="lft2"/>
          <mcr name="lft3"/>
          <mcr name="frfo"/>
          <mcr name="lft0"/>
        </item>
      </unit>
      <unit id="unit_atmo" title="[a|d]tmo" label="Attach/Detach MOV.OPT">
        <item id="atmo" label="Attach at MOV.OPT">
          <bypass label="CART ON MOV.OPT?">
            <not form="data" site="crt" var="dps">9</not>
          </bypass>
          <goal label="Instrument ON?">
            <equal form="msg" site="dso" var="mis">ON</equal>
            <equal form="msg" site="crt" var="jlv">D</equal>
          </goal>
          <mcr name="lft1"/>
          <mcr name="lft2"/>
          <mcr name="lft3"/>
          <mcr name="fcmo"/>
          <mcr name="lft0"/>
        </item>
        <item id="dtmo" label="Detach at MOV.OPT">
          <bypass label="CART ON MOV.OPT?">
            <not form="data" site="crt" var="dps">9</not>
          </bypass>
          <goal label="Instrument OFF?">
            <equal form="msg" site="dso" var="mis">OFF</equal>
            <equal form="msg" site="crt" var="jlv">D</equal>
          </goal>
          <mcr name="comics"/>
          <mcr name="lft1"/>
          <mcr name="lft2"/>
          <mcr name="lft3"/>
          <mcr name="frmo"/>
          <mcr name="lft0"/>
        </item>
      </unit>
      <unit id="unit_atfi" title="[a|d]tfi" label="Attach/Detach FIX.IR">
        <item id="atfi" label="Attach at FIX.IR">
          <bypass label="CART ON FIX.IR?">
            <not form="data" site="crt" var="dps">12</not>
          </bypass>
          <goal label="Instrument ON?">
            <equal form="msg" site="dsi" var="fis">ON</equal>
            <equal form="msg" site="crt" var="jlv">D</equal>
          </goal>
          <mcr name="lft1"/>
          <mcr name="lft2"/>
          <mcr name="lft3"/>
          <mcr name="fcfi"/>
          <mcr name="lft0"/>
        </item>
        <item id="dtfi" label="Detach at FIX.IR">
          <bypass label="CART ON FIX.IR?">
            <not form="data" site="crt" var="dps">12</not>
          </bypass>
          <goal label="Instrument OFF?">
            <equal form="msg" site="dsi" var="fis">OFF</equal>
            <equal form="msg" site="crt" var="jlv">D</equal>
          </goal>
          <mcr name="focas"/>
          <mcr name="lft1"/>
          <mcr name="lft2"/>
          <mcr name="lft3"/>
          <mcr name="frfi"/>
          <mcr name="lft0"/>
        </item>
      </unit>
      <unit id="unit_atmi" title="[a|d]tmi" label="Attach/Detach MOV.IR">
        <item id="atmi" label="Attach at MOV.IR">
          <bypass label="CART ON MOV.IR?">
            <not form="data" site="crt" var="dps">11</not>
          </bypass>
          <goal label="Instrument ON?">
            <equal form="msg" site="dsi" var="mis">ON</equal>
            <equal form="msg" site="crt" var="jlv">D</equal>
          </goal>
          <mcr name="lft1"/>
          <mcr name="lft2"/>
          <mcr name="lft3"/>
          <mcr name="fcmi"/>
          <mcr name="lft0"/>
        </item>
        <item id="dtmi" label="Detach at MOV.IR">
          <bypass label="CART ON MOV.IR?">
            <not form="data" site="crt" var="dps">11</not>
          </bypass>
          <goal label="Instrument OFF?">
            <equal form="msg" site="dsi" var="mis">OFF</equal>
            <equal form="msg" site="crt" var="jlv">D</equal>
          </goal>
          <mcr name="moircs"/>
          <mcr name="lft1"/>
          <mcr name="lft2"/>
          <mcr name="lft3"/>
          <mcr name="frmi"/>
          <mcr name="lft0"/>
        </item>
      </unit>
      <unit id="unit_atcs" title="[a|d]tcs" label="Attach/Detach CAS">
        <item id="atcs" label="Attach at CAS">
          <bypass label="CART ON CAS?">
            <not form="data" site="crt" var="dps">1</not>
          </bypass>
          <goal label="Instrument ON?">
            <equal form="msg" site="dts" var="cis">ON</equal>
            <equal form="msg" site="crt" var="jlv">D</equal>
          </goal>
          <mcr name="lft1"/>
          <mcr name="lft2"/>
          <mcr name="adj4"/>
          <mcr name="lft3"/>
          <mcr name="fccs"/>
          <mcr name="lft0"/>
        </item>
        <item id="dtcs" label="Detach at CAS">
          <bypass label="CART ON CAS?">
            <not form="data" site="crt" var="dps">1</not>
          </bypass>
          <goal label="Instrument OFF?">
            <equal form="msg" site="dts" var="cis">OFF</equal>
            <equal form="msg" site="crt" var="jlv">D</equal>
          </goal>
          <mcr name="lft1"/>
          <mcr name="lft2"/>
          <mcr name="adj0"/>
          <mcr name="lft3"/>
          <mcr name="frcs"/>
          <mcr name="lft0"/>
        </item>
      </unit>
    </group>
    <!--Compound Exclusive Run Commands-->
    <group id="g_cer" caption="Compound Exclusive Run Commands" rank="2">
      <unit id="unit_rto" title="t[dp|rt]o" label="Depart/Return OPT w/Load">
        <item id="tdpo" label="Run Tag 10 to 1 w/Load">
          <goal label="Cart on Destination?">
            <equal form="data" site="crt" var="cps">1</equal>
          </goal>
          <check label="CART on TAG?">
            <equal form="msg" site="crt" var="jlv">D</equal>
            <equal form="msg" site="dso" var="mtr">BK</equal>
            <equal form="msg" site="dso" var="fis">OFF</equal>
            <equal form="msg" site="crt" var="ion">ON</equal>
          </check>
          <mcr name="runw">
            <argv>1</argv>
          </mcr>
        </item>
        <item id="trto" label="Run Tag 1 to 10 w/o Load">
          <goal label="Cart on Destination?">
            <equal form="data" site="crt" var="cps">10</equal>
          </goal>
          <check label="CART on TAG?">
            <equal form="msg" site="crt" var="jlv">D</equal>
            <equal form="msg" site="dso" var="mtr">BK</equal>
            <equal form="msg" site="dso" var="fis">OFF</equal>
            <equal form="msg" site="crt" var="ion">ON</equal>
          </check>
          <mcr name="runw">
            <argv>10</argv>
          </mcr>
        </item>
      </unit>
      <unit id="unit_rti" title="t[dp|rt]i" label="Depart/Return IR w/Load">
        <item id="tdpi" label="Run Tag 12 to 1 w/Load">
          <goal label="Cart on Destination?">
            <equal form="data" site="crt" var="cps">1</equal>
          </goal>
          <check label="CART on TAG?">
            <equal form="msg" site="crt" var="jlv">D</equal>
            <equal form="msg" site="dsi" var="mtr">BK</equal>
            <equal form="msg" site="dsi" var="fis">OFF</equal>
            <equal form="msg" site="crt" var="ion">ON</equal>
          </check>
          <mcr name="runw">
            <argv>1</argv>
          </mcr>
        </item>
        <item id="trti" label="Run Tag 1 to 12 w/Load">
          <goal label="Cart on Destination?">
            <equal form="data" site="crt" var="cps">12</equal>
          </goal>
          <check label="CART on TAG?">
            <equal form="msg" site="crt" var="jlv">D</equal>
            <equal form="msg" site="dsi" var="mtr">BK</equal>
            <equal form="msg" site="dsi" var="fis">OFF</equal>
            <equal form="msg" site="crt" var="ion">ON</equal>
            <equal form="data" site="crt" var="cps">1</equal>
          </check>
          <mcr name="runw">
            <argv>12</argv>
          </mcr>
        </item>
      </unit>
      <unit id="unit_rdo" title="r[dp|rt]o" label="Depart/Return OPT w/o Load">
        <item id="rdpo" label="Run Tag 10 to 1 w/o Load">
          <goal label="Cart on Destination?">
            <equal form="data" site="crt" var="cps">1</equal>
          </goal>
          <check label="CART on TAG?">
            <equal form="msg" site="crt" var="jlv">D</equal>
            <equal form="msg" site="dso" var="mtr">BK</equal>
            <equal form="msg" site="crt" var="ion">OFF</equal>
            <equal form="data" site="crt" var="cps">10</equal>
          </check>
          <mcr name="runw">
            <argv>1</argv>
          </mcr>
        </item>
        <item id="rrto" label="Run Tag 1 to 10 w/o Load">
          <goal label="Cart on Destination?">
            <equal form="data" site="crt" var="cps">10</equal>
          </goal>
          <check label="CART on TAG?">
            <equal form="msg" site="crt" var="jlv">D</equal>
            <equal form="msg" site="dso" var="mtr">BK</equal>
            <equal form="msg" site="crt" var="ion">OFF</equal>
            <equal form="data" site="crt" var="cps">1</equal>
          </check>
          <mcr name="runw">
            <argv>10</argv>
          </mcr>
        </item>
      </unit>
      <unit id="unit_rdi" title="r[dp|rt]i" label="Depart/Return IR w/o Load">
        <item id="rdpi" label="Run Tag 12 to 1 w/o Load">
          <goal label="Cart on Destination?">
            <equal form="data" site="crt" var="cps">1</equal>
          </goal>
          <check label="CART on TAG?">
            <equal form="msg" site="crt" var="jlv">D</equal>
            <equal form="msg" site="crt" var="ion">OFF</equal>
            <equal form="data" site="crt" var="cps">12</equal>
          </check>
          <mcr name="runw">
            <argv>1</argv>
          </mcr>
        </item>
        <item id="rrti" label="Run Tag 1 to 12 w/o Load">
          <goal label="Cart on Destination?">
            <equal form="data" site="crt" var="cps">12</equal>
          </goal>
          <check label="CART on TAG?">
            <equal form="msg" site="crt" var="jlv">D</equal>
            <equal form="msg" site="dsi" var="mtr">BK</equal>
            <equal form="msg" site="crt" var="ion">OFF</equal>
            <equal form="data" site="crt" var="cps">1</equal>
          </check>
          <mcr name="runw">
            <argv>12</argv>
          </mcr>
        </item>
        <item id="rdpif" label="Run Tag 12 to 1 for FOCAS">
          <goal label="Cart on Destination?">
            <equal form="data" site="crt" var="cps">1</equal>
          </goal>
          <check label="CART on TAG?">
            <equal form="msg" site="crt" var="ist">FOCAS</equal>
            <equal form="msg" site="dts" var="iid">FOCAS</equal>
            <equal form="msg" site="dts" var="cis">ON</equal>
            <equal form="msg" site="crt" var="jlv">D</equal>
            <equal form="msg" site="crt" var="ion">ON</equal>
          </check>
          <mcr name="runw">
            <argv>1</argv>
          </mcr>
        </item>
        <item id="rrtif" label="Run Tag 1 to 12 for FOCAS">
          <goal label="Cart on Destination?">
            <equal form="data" site="crt" var="cps">12</equal>
          </goal>
          <check label="CART on TAG?">
            <equal form="msg" site="crt" var="ist">FOCAS</equal>
            <equal form="msg" site="dts" var="iid">FOCAS</equal>
            <equal form="msg" site="dts" var="cis">ON</equal>
            <equal form="msg" site="crt" var="jlv">D</equal>
            <equal form="msg" site="dsi" var="mtr">BK</equal>
            <equal form="msg" site="crt" var="ion">ON</equal>
          </check>
          <mcr name="runw">
            <argv>12</argv>
          </mcr>
        </item>
      </unit>
    </group>
    <!--Compound Transport Commands (CRP: CAS Relay Point)-->
    <group id="g_ctrp" caption="Compound Transport Commands" rank="2">
      <unit id="unit_t2fo" title="t[i|o]fo" label="Transport CRP and FIX.OPT">
        <item id="tifo" label="Run Tag 3 to 10 w/Inst">
          <goal label="Cart on Destination?">
            <equal form="data" site="crt" var="cps">10</equal>
          </goal>
          <check label="CART on TAG?">
            <equal form="msg" site="crt" var="jlv">D</equal>
            <equal form="msg" site="dso" var="mtr">BK</equal>
            <equal form="msg" site="crt" var="ion">ON</equal>
            <equal form="data" site="crt" var="cps">3</equal>
            <equal form="msg" site="dso" var="fis">OFF</equal>
            <equal form="msg" site="dso" var="fhk">UNHK</equal>
            <equal form="msg" site="dso" var="fjb">UP</equal>
          </check>
          <mcr name="runw">
            <argv>10</argv>
          </mcr>
        </item>
        <item id="tofo" label="Run Tag 10 to 3 w/Inst">
          <goal label="Cart on Destination?">
            <equal form="data" site="crt" var="cps">3</equal>
          </goal>
          <check label="CART on TAG?">
            <equal form="msg" site="crt" var="jlv">D</equal>
            <equal form="msg" site="dso" var="mtr">BK</equal>
            <equal form="msg" site="crt" var="ion">ON</equal>
            <equal form="data" site="crt" var="cps">10</equal>
            <equal form="msg" site="dso" var="fis">OFF</equal>
            <equal form="msg" site="dso" var="fhk">UNHK</equal>
            <equal form="msg" site="dso" var="fjb">UP</equal>
          </check>
          <mcr name="runw">
            <argv>3</argv>
          </mcr>
        </item>
      </unit>
      <unit id="unit_t2mo" title="t[i|o]mo" label="Transport CRP and MOV.OPT">
        <item id="timo" label="Run Tag 3 to 9 w/Inst">
          <goal label="Cart on Destination?">
            <equal form="data" site="crt" var="cps">9</equal>
          </goal>
          <check label="CART on TAG?">
            <equal form="msg" site="crt" var="jlv">D</equal>
            <equal form="msg" site="dso" var="mtr">FW</equal>
            <equal form="msg" site="dso" var="mrt">LOAD</equal>
            <equal form="msg" site="crt" var="ion">ON</equal>
            <equal form="data" site="crt" var="cps">3</equal>
            <equal form="msg" site="dso" var="mis">OFF</equal>
            <equal form="msg" site="dso" var="mhk">UNHK</equal>
            <equal form="msg" site="dso" var="mjb">UP</equal>
          </check>
          <mcr name="runw">
            <argv>9</argv>
          </mcr>
        </item>
        <item id="tomo" label="Run Tag 9 to 3 w/Inst">
          <goal label="Cart on Destination?">
            <equal form="data" site="crt" var="cps">3</equal>
          </goal>
          <check label="CART on TAG?">
            <equal form="msg" site="crt" var="jlv">D</equal>
            <equal form="msg" site="dso" var="mtr">FW</equal>
            <equal form="msg" site="dso" var="mrt">LOAD</equal>
            <equal form="msg" site="crt" var="ion">ON</equal>
            <equal form="data" site="crt" var="cps">9</equal>
            <equal form="msg" site="dso" var="mis">OFF</equal>
            <equal form="msg" site="dso" var="mhk">UNHK</equal>
            <equal form="msg" site="dso" var="mjb">UP</equal>
          </check>
          <mcr name="runw">
            <argv>3</argv>
          </mcr>
        </item>
      </unit>
      <unit id="unit_t2fi" title="t[i|o]fi" label="Transport CRP and FIX.IR">
        <item id="tifi" label="Run Tag 3 to 12 w/Inst">
          <goal label="Cart on Destination?">
            <equal form="data" site="crt" var="cps">12</equal>
          </goal>
          <check label="CART on TAG?">
            <equal form="msg" site="crt" var="jlv">D</equal>
            <equal form="msg" site="dsi" var="mtr">BK</equal>
            <equal form="msg" site="crt" var="ion">ON</equal>
            <equal form="data" site="crt" var="cps">3</equal>
            <equal form="msg" site="dsi" var="fis">OFF</equal>
            <equal form="msg" site="dsi" var="fhk">UNHK</equal>
            <equal form="msg" site="dsi" var="fjb">UP</equal>
          </check>
          <mcr name="runw">
            <argv>12</argv>
          </mcr>
        </item>
        <item id="tofi" label="Run Tag 12 to 3 w/Inst">
          <goal label="Cart on Destination?">
            <equal form="data" site="crt" var="cps">3</equal>
          </goal>
          <check label="CART on TAG?">
            <equal form="msg" site="crt" var="jlv">D</equal>
            <equal form="msg" site="dso" var="mtr">BK</equal>
            <equal form="msg" site="crt" var="ion">OFF</equal>
            <equal form="data" site="crt" var="cps">12</equal>
            <equal form="msg" site="dsi" var="fis">OFF</equal>
            <equal form="msg" site="dsi" var="fhk">UNHK</equal>
            <equal form="msg" site="dsi" var="fjb">UP</equal>
          </check>
          <mcr name="runw">
            <argv>3</argv>
          </mcr>
        </item>
      </unit>
      <unit id="unit_t2mi" title="t[i|o]mi" label="Transport CRP and MOV.IR">
        <item id="timi" label="Run Tag 3 to 11 w/Inst">
          <goal label="Cart on Destination?">
            <equal form="data" site="crt" var="cps">11</equal>
          </goal>
          <check label="CART on TAG?">
            <equal form="msg" site="crt" var="jlv">D</equal>
            <equal form="msg" site="dsi" var="mtr">FW</equal>
            <equal form="msg" site="dso" var="mrt">LOAD</equal>
            <equal form="msg" site="crt" var="ion">ON</equal>
            <equal form="data" site="crt" var="cps">3</equal>
            <equal form="msg" site="dsi" var="mis">OFF</equal>
            <equal form="msg" site="dsi" var="mhk">UNHK</equal>
            <equal form="msg" site="dsi" var="mjb">UP</equal>
          </check>
          <mcr name="runw">
            <argv>11</argv>
          </mcr>
        </item>
        <item id="tomi" label="Run Tag 11 to 3 w/Inst">
          <goal label="Cart on Destination?">
            <equal form="data" site="crt" var="cps">7</equal>
          </goal>
          <check label="CART on TAG?">
            <equal form="msg" site="crt" var="jlv">D</equal>
            <equal form="msg" site="dsi" var="mtr">FW</equal>
            <equal form="msg" site="dsi" var="mrt">LOAD</equal>
            <equal form="msg" site="crt" var="ion">ON</equal>
            <equal form="data" site="crt" var="cps">11</equal>
            <equal form="msg" site="dsi" var="mis">OFF</equal>
            <equal form="msg" site="dsi" var="mhk">UNHK</equal>
            <equal form="msg" site="dsi" var="mjb">UP</equal>
          </check>
          <mcr name="runw">
            <argv>3</argv>
          </mcr>
        </item>
      </unit>
      <unit id="unit_t2cs" title="t[i|o]cs" label="Transport CRP and CAS">
        <item id="tics" label="Run Tag 3 to 1 w/Inst">
          <goal label="Cart on Destination?">
            <equal form="data" site="crt" var="cps">1</equal>
          </goal>
          <check label="CART on TAG?">
            <equal form="msg" site="crt" var="jlv">D</equal>
            <equal form="msg" site="crt" var="ion">ON</equal>
            <equal form="data" site="crt" var="cps">3</equal>
            <equal form="msg" site="dts" var="cis">OFF</equal>
            <equal form="msg" site="dts" var="iang">UNHK</equal>
            <equal form="msg" site="dts" var="bl01">UP</equal>
          </check>
          <mcr name="runw">
            <argv>1</argv>
          </mcr>
        </item>
        <item id="tocs" label="Run Tag 1 to 3 w/Inst">
          <goal label="Cart on Destination?">
            <equal form="data" site="crt" var="cps">3</equal>
          </goal>
          <check label="CART on TAG?">
            <equal form="msg" site="crt" var="jlv">D</equal>
            <equal form="msg" site="crt" var="ion">ON</equal>
            <equal form="data" site="crt" var="cps">1</equal>
            <equal form="msg" site="dts" var="cis">OFF</equal>
            <equal form="msg" site="dts" var="iang">UNHK</equal>
            <equal form="msg" site="dts" var="bl01">UP</equal>
          </check>
          <mcr name="runw">
            <argv>3</argv>
          </mcr>
        </item>
      </unit>
    </group>
    <!--Compound Run Commands-->
    <group id="g_cdh" caption="Compound Run Commands" rank="2">
      <unit id="unit_r2fo" title="r[i|o]fo" label="Run ORP and FIX.OPT">
        <item id="rifo" label="Run Tag 7 to 10 w/o Inst">
          <goal label="Cart on Destination?">
            <equal form="data" site="crt" var="cps">10</equal>
          </goal>
          <check label="CART on TAG?">
            <equal form="msg" site="crt" var="jlv">D</equal>
            <equal form="msg" site="dso" var="mtr">BK</equal>
            <equal form="msg" site="crt" var="ion">OFF</equal>
            <equal form="data" site="crt" var="cps">7</equal>
          </check>
          <mcr name="runw">
            <argv>10</argv>
          </mcr>
        </item>
        <item id="rofo" label="Run Tag 10 to 7 w/o Inst">
          <goal label="Cart on Destination?">
            <not form="data" site="crt" var="cps">10</not>
          </goal>
          <check label="CART on TAG?">
            <equal form="msg" site="crt" var="jlv">D</equal>
            <equal form="msg" site="dso" var="mtr">BK</equal>
            <equal form="msg" site="crt" var="ion">OFF</equal>
            <equal form="data" site="crt" var="cps">10</equal>
          </check>
          <mcr name="runw">
            <argv>7</argv>
          </mcr>
        </item>
      </unit>
      <unit id="unit_r2mo" title="r[i|o]mo" label="Run ORP and MOV.OPT">
        <item id="rimo" label="Run Tag 7 to 9 w/o Inst">
          <goal label="Cart on Destination?">
            <equal form="data" site="crt" var="cps">9</equal>
          </goal>
          <check label="CART on TAG?">
            <equal form="msg" site="crt" var="jlv">D</equal>
            <equal form="msg" site="dso" var="mtr">FW</equal>
            <equal form="msg" site="crt" var="ion">OFF</equal>
            <equal form="data" site="crt" var="cps">7</equal>
          </check>
          <mcr name="runw">
            <argv>9</argv>
          </mcr>
        </item>
        <item id="romo" label="Run Tag 9 to 7 w/o Inst">
          <goal label="Cart on Destination?">
            <not form="data" site="crt" var="cps">9</not>
          </goal>
          <check label="CART on TAG?">
            <equal form="msg" site="crt" var="jlv">D</equal>
            <equal form="msg" site="dso" var="mtr">FW</equal>
            <equal form="msg" site="crt" var="ion">OFF</equal>
            <equal form="data" site="crt" var="cps">9</equal>
          </check>
          <mcr name="runw">
            <argv>7</argv>
          </mcr>
        </item>
      </unit>
      <unit id="unit_r2fi" title="r[i|o]fi" label="Run IRP and FIX.IR">
        <item id="rifi" label="Run Tag 8 to 12 w/o Inst">
          <goal label="Cart on Destination?">
            <equal form="data" site="crt" var="cps">12</equal>
          </goal>
          <check label="CART on TAG?">
            <equal form="msg" site="crt" var="jlv">D</equal>
            <equal form="msg" site="dsi" var="mtr">BK</equal>
            <equal form="msg" site="crt" var="ion">OFF</equal>
            <equal form="data" site="crt" var="cps">8</equal>
          </check>
          <mcr name="runw">
            <argv>12</argv>
          </mcr>
        </item>
        <item id="rofi" label="Run Tag 12 to 8 w/o Inst">
          <goal label="Cart on Destination?">
            <not form="data" site="crt" var="cps">12</not>
          </goal>
          <check label="CART on TAG?">
            <equal form="msg" site="crt" var="jlv">D</equal>
            <equal form="msg" site="dsi" var="mtr">BK</equal>
            <equal form="msg" site="crt" var="ion">OFF</equal>
            <equal form="data" site="crt" var="cps">12</equal>
          </check>
          <mcr name="runw">
            <argv>8</argv>
          </mcr>
        </item>
      </unit>
      <unit id="unit_r2mi" title="r[i|o]mi" label="Run IRP and MOV.IR">
        <item id="rimi" label="Run Tag 8 to 11 w/o Inst">
          <goal label="Cart on Destination?">
            <equal form="data" site="crt" var="cps">11</equal>
          </goal>
          <check label="CART on TAG?">
            <equal form="msg" site="crt" var="jlv">D</equal>
            <equal form="msg" site="dsi" var="mtr">FW</equal>
            <equal form="msg" site="crt" var="ion">OFF</equal>
            <equal form="data" site="crt" var="cps">8</equal>
          </check>
          <mcr name="runw">
            <argv>11</argv>
          </mcr>
        </item>
        <item id="romi" label="Run Tag 11 to 8 w/o Inst">
          <goal label="Cart on Destination?">
            <not form="data" site="crt" var="cps">11</not>
          </goal>
          <check label="CART on TAG?">
            <equal form="msg" site="crt" var="jlv">D</equal>
            <equal form="msg" site="dsi" var="mtr">FW</equal>
            <equal form="msg" site="crt" var="ion">OFF</equal>
            <equal form="data" site="crt" var="cps">11</equal>
          </check>
          <mcr name="runw">
            <argv>8</argv>
          </mcr>
        </item>
      </unit>
    </group>
    <!--Compound Flange Commands Jack/Hook-->
    <!--Use crt@dps instead of cps which will be zero during liftup-->
    <group id="g_cfljh" caption="Compound Flange Jack/Hook Commands" rank="2">
      <unit id="unit_flfo" title="f[c|r]fo" label="Flange Clamp/Release FIX.OPT">
        <item id="fcfo" label="Clamp at FIX.OPT">
          <goal label="Instrument ON?">
            <equal form="msg" site="dso" var="fis">ON</equal>
          </goal>
          <check label="CART ON TAG?">
            <equal form="data" site="crt" var="dps">10</equal>
            <equal form="msg" site="crt" var="jlv">H</equal>
          </check>
          <mcr name="jd4fo"/>
          <mcr name="r0fo"/>
          <mcr name="ju0fo"/>
        </item>
        <item id="frfo" label="Release at FIX.OPT">
          <goal label="Instrument OFF?">
            <equal form="msg" site="dso" var="fis">OFF</equal>
            <equal form="msg" site="crt" var="jlv">H</equal>
          </goal>
          <check label="CART ON TAG?">
            <equal form="data" site="crt" var="dps">10</equal>
            <equal form="msg" site="crt" var="jlv">H</equal>
          </check>
          <mcr name="jd0fo"/>
          <mcr name="r4fo"/>
          <mcr name="ju4fo"/>
        </item>
      </unit>
      <unit id="unit_flmo" title="f[c|r]mo" label="Flange Clamp/Release MOV.OPT">
        <item id="fcmo" label="Clamp at MOV.OPT">
          <goal label="Instrument ON?">
            <equal form="msg" site="dso" var="mis">ON</equal>
          </goal>
          <check label="CART ON TAG?">
            <equal form="data" site="crt" var="dps">9</equal>
            <equal form="msg" site="crt" var="jlv">H</equal>
          </check>
          <mcr name="jd4mo"/>
          <mcr name="r0mo"/>
          <mcr name="ju0mo"/>
        </item>
        <item id="frmo" label="Release at MOV.OPT">
          <goal label="Instrument OFF?">
            <equal form="msg" site="dso" var="mis">OFF</equal>
            <equal form="msg" site="crt" var="jlv">H</equal>
          </goal>
          <check label="CART ON TAG?">
            <equal form="data" site="crt" var="dps">9</equal>
            <equal form="msg" site="crt" var="jlv">H</equal>
          </check>
          <mcr name="jd0mo"/>
          <mcr name="r4mo"/>
          <mcr name="ju4mo"/>
        </item>
      </unit>
      <unit id="unit_flfi" title="f[c|r]fi" label="Flange Clamp/Release FIX.IR ">
        <item id="fcfi" label="Clamp at FIX.IR">
          <goal label="Instrument ON?">
            <equal form="msg" site="dsi" var="fis">ON</equal>
          </goal>
          <check label="CART ON TAG?">
            <equal form="data" site="crt" var="dps">12</equal>
            <equal form="msg" site="crt" var="jlv">H</equal>
          </check>
          <mcr name="jd4fi"/>
          <mcr name="r0fi"/>
          <mcr name="ju0fi"/>
        </item>
        <item id="frfi" label="Release at FIX.IR">
          <goal label="Instrument OFF?">
            <equal form="msg" site="dsi" var="fis">OFF</equal>
            <equal form="msg" site="crt" var="jlv">H</equal>
          </goal>
          <check label="CART ON TAG?">
            <equal form="data" site="crt" var="dps">12</equal>
            <equal form="msg" site="crt" var="jlv">H</equal>
          </check>
          <mcr name="jd0fi"/>
          <mcr name="r4fi"/>
          <mcr name="ju4fi"/>
        </item>
      </unit>
      <unit id="unit_flmi" title="f[c|r]mi" label="Flange Clamp/Release MOV.IR">
        <item id="fcmi" label="Clamp at MOV.IR">
          <goal label="Instrument ON?">
            <equal form="msg" site="dsi" var="mis">ON</equal>
          </goal>
          <check label="CART ON TAG?">
            <equal form="data" site="crt" var="dps">11</equal>
            <equal form="msg" site="crt" var="jlv">H</equal>
          </check>
          <mcr name="jd4mi"/>
          <mcr name="r0mi"/>
          <mcr name="ju0mi"/>
        </item>
        <item id="frmi" label="Release at MOV.IR">
          <goal label="Instrument OFF?">
            <equal form="msg" site="dsi" var="mis">OFF</equal>
            <equal form="msg" site="crt" var="jlv">H</equal>
          </goal>
          <check label="CART ON TAG?">
            <equal form="data" site="crt" var="dps">11</equal>
            <equal form="msg" site="crt" var="jlv">H</equal>
          </check>
          <mcr name="jd0mi"/>
          <mcr name="r4mi"/>
          <mcr name="ju4mi"/>
        </item>
      </unit>
      <unit id="unit_flcs" title="f[c|r]cs" label="Flange Clamp/Release CAS">
        <item id="fccs" label="Clamp at CAS">
          <goal label="Instrument ON?">
            <equal form="msg" site="dts" var="cis">ON</equal>
          </goal>
          <check label="CART ON TAG?">
            <equal form="data" site="crt" var="dps">1</equal>
            <equal form="msg" site="crt" var="jlv">H</equal>
          </check>
          <mcr name="jd4cs"/>
          <mcr name="r0cs"/>
          <mcr name="ju0cs"/>
        </item>
        <item id="frcs" label="Release at CAS">
          <goal label="Instrument OFF?">
            <equal form="msg" site="dts" var="cis">OFF</equal>
            <equal form="msg" site="crt" var="jlv">H</equal>
          </goal>
          <check label="CART ON TAG?">
            <equal form="data" site="crt" var="dps">1</equal>
            <equal form="msg" site="crt" var="jlv">H</equal>
          </check>
          <mcr name="jd0cs"/>
          <mcr name="r4cs"/>
          <mcr name="ju4cs"/>
        </item>
      </unit>
    </group>
    <!--Compound Movable Flange Commands-->
    <!--Using crt@cps to check on jack point which can be zero-->
    <group id="g_cmov" caption="Compound Movable Flange Commands" rank="2">
      <unit id="unit_mvo" title="[ld|st]mo" label="Loading/Storing MOV.OPT">
        <item id="ldmo" label="Loading INST MOV.OPT">
          <goal label="Transer Loading Position?">
            <equal form="msg" site="dso" var="mtr">FW</equal>
            <equal form="msg" site="dso" var="rot">LOAD</equal>
          </goal>
          <check label="CART CLEAR?">
            <not form="data" site="crt" var="cps">0</not>
            <not form="data" site="crt" var="cps">10</not>
            <not form="data" site="crt" var="cps">9</not>
          </check>
          <mcr name="tfmo"/>
          <mcr name="afmo"/>
        </item>
        <item id="stmo" label="Storing INST MOV.OPT ">
          <goal label="Transer Stored Position?">
            <equal form="msg" site="dso" var="mtr">BK</equal>
          </goal>
          <check label="CART CLEAR?">
            <not form="data" site="crt" var="cps">0</not>
            <not form="data" site="crt" var="cps">10</not>
            <not form="data" site="crt" var="cps">9</not>
          </check>
          <mcr name="asmo"/>
          <mcr name="tbmo"/>
        </item>
      </unit>
      <unit id="unit_mvi" title="[ld|st]mi" label="Loading/Storing MOV.IR">
        <item id="ldmi" label="Loading INST MOV.IR">
          <goal label="Transer Loading Position?">
            <equal form="msg" site="dsi" var="mtr">FW</equal>
            <equal form="msg" site="dsi" var="rot">LOAD</equal>
          </goal>
          <check label="CART CLEAR?">
            <not form="data" site="crt" var="cps">0</not>
            <not form="data" site="crt" var="cps">12</not>
            <not form="data" site="crt" var="cps">11</not>
          </check>
          <mcr name="tfmi"/>
          <mcr name="afmi"/>
        </item>
        <item id="stmi" label="Storing INST MOV.IR">
          <goal label="Transer Stored Position?">
            <equal form="msg" site="dsi" var="mtr">BK</equal>
          </goal>
          <check label="CART CLEAR?">
            <not form="data" site="crt" var="cps">0</not>
            <not form="data" site="crt" var="cps">12</not>
            <not form="data" site="crt" var="cps">11</not>
          </check>
          <mcr name="asmi"/>
          <mcr name="tbmi"/>
        </item>
      </unit>
    </group>
    <!--Atomic Flange Jack Bolt Commands-->
    <group id="g_jak" caption="Atomic Jack Bolt Commands" column="2" rank="3">
      <unit id="unit_jfo" title="j[u|d][0|4]fo" label="Jack Up/Dw FIX.OPT">
        <item id="jd0fo" label="InR0 Jkdw at FIX.OPT">
          <goal label="Jack DW?">
            <equal form="msg" site="dso" var="fjb">DW</equal>
          </goal>
          <check label="HOOK?">
            <equal form="msg" site="dso" var="fis">ON</equal>
            <equal form="msg" site="dso" var="fhk">HOOK</equal>
          </check>
          <exec site="dso" name="fjdw"/>
          <wait label="Jack start?" retry="5">
            <equal form="msg" site="dso" var="exe">ON</equal>
          </wait>
          <wait label="Jacking" retry="50">
            <equal form="msg" site="dso" var="exe">OFF</equal>
          </wait>
        </item>
        <item id="ju0fo" label="InR0 Jkup at FIX.OPT">
          <goal label="Instrument ON?">
            <equal form="msg" site="dso" var="fis">ON</equal>
          </goal>
          <check label="HOOK?">
            <equal form="msg" site="dso" var="fhk">HOOK</equal>
          </check>
          <exec site="dso" name="fjup"/>
          <wait label="Jack start?" retry="5">
            <equal form="msg" site="dso" var="exe">ON</equal>
          </wait>
          <wait label="Jacking" retry="50">
            <equal form="msg" site="dso" var="exe">OFF</equal>
          </wait>
        </item>
        <item id="ju4fo" label="InR4 Jkup at FIX.OPT">
          <goal label="Jack Up?">
            <equal form="msg" site="dso" var="fjb">UP</equal>
          </goal>
          <check label="UNHOOK?">
            <equal form="msg" site="dso" var="fhk">UNHK</equal>
          </check>
          <exec site="dso" name="fjup"/>
          <wait label="Jack start?" retry="5">
            <equal form="msg" site="dso" var="exe">ON</equal>
          </wait>
          <wait label="Jacking" retry="50">
            <equal form="msg" site="dso" var="exe">OFF</equal>
          </wait>
        </item>
        <item id="jd4fo" label="InR4 Jkdw at FIX.OPT">
          <goal label="Jack Dw?">
            <equal form="msg" site="dso" var="fjb">DW</equal>
          </goal>
          <check label="UNHOOK?">
            <equal form="msg" site="dso" var="fhk">UNHK</equal>
          </check>
          <exec site="dso" name="fjdw"/>
          <wait label="Jack start?" retry="5">
            <equal form="msg" site="dso" var="exe">ON</equal>
          </wait>
          <wait label="Jacking" retry="50">
            <equal form="msg" site="dso" var="exe">OFF</equal>
          </wait>
        </item>
      </unit>
      <unit id="unit_jmo" title="j[u|d][0|4]mo" label="Jack Up/Dw MOV.OPT">
        <item id="jd0mo" label="InR0 Jkdw at MOV.OPT">
          <goal label="Jack DW?">
            <equal form="msg" site="dso" var="mjb">DW</equal>
          </goal>
          <check label="HOOK?">
            <equal form="msg" site="dso" var="mis">ON</equal>
            <equal form="msg" site="dso" var="mhk">HOOK</equal>
          </check>
          <exec site="dso" name="mjdw"/>
          <wait label="Jack start?" retry="5">
            <equal form="msg" site="dso" var="exe">ON</equal>
          </wait>
          <wait label="Jacking" retry="50">
            <equal form="msg" site="dso" var="exe">OFF</equal>
          </wait>
        </item>
        <item id="ju0mo" label="InR0 Jkup at MOV.OPT">
          <goal label="Instrument ON?">
            <equal form="msg" site="dso" var="mis">ON</equal>
          </goal>
          <check label="HOOK?">
            <equal form="msg" site="dso" var="mhk">HOOK</equal>
          </check>
          <exec site="dso" name="mjup"/>
          <wait label="Jack start?" retry="5">
            <equal form="msg" site="dso" var="exe">ON</equal>
          </wait>
          <wait label="Jacking" retry="50">
            <equal form="msg" site="dso" var="exe">OFF</equal>
          </wait>
        </item>
        <item id="ju4mo" label="InR4 Jkup at MOV.OPT">
          <goal label="Jack Up?">
            <equal form="msg" site="dso" var="mjb">UP</equal>
          </goal>
          <check label="UNHOOK?">
            <equal form="msg" site="dso" var="mhk">UNHK</equal>
          </check>
          <exec site="dso" name="mjup"/>
          <wait label="Jack start?" retry="5">
            <equal form="msg" site="dso" var="exe">ON</equal>
          </wait>
          <wait label="Jacking" retry="50">
            <equal form="msg" site="dso" var="exe">OFF</equal>
          </wait>
        </item>
        <item id="jd4mo" label="InR4 Jkdw at MOV.OPT">
          <goal label="Jack Dw?">
            <equal form="msg" site="dso" var="mjb">DW</equal>
          </goal>
          <check label="UNHOOK?">
            <equal form="msg" site="dso" var="mhk">UNHK</equal>
          </check>
          <exec site="dso" name="mjdw"/>
          <wait label="Jack start?" retry="5">
            <equal form="msg" site="dso" var="exe">ON</equal>
          </wait>
          <wait label="Jacking" retry="50">
            <equal form="msg" site="dso" var="exe">OFF</equal>
          </wait>
        </item>
      </unit>
      <unit id="unit_jfi" title="j[u|d][0|4]fi" label="Jack Up/Dw FIX.IR">
        <item id="jd0fi" label="InR0 Jkdw at FIX.IR">
          <goal label="Jack DW?">
            <equal form="msg" site="dsi" var="fjb">DW</equal>
          </goal>
          <check label="HOOK?">
            <equal form="msg" site="dsi" var="fis">ON</equal>
            <equal form="msg" site="dsi" var="fhk">HOOK</equal>
          </check>
          <exec site="dsi" name="fjdw"/>
          <wait label="Jack start?" retry="5">
            <equal form="msg" site="dsi" var="exe">ON</equal>
          </wait>
          <wait label="Jacking" retry="50">
            <equal form="msg" site="dsi" var="exe">OFF</equal>
          </wait>
        </item>
        <item id="ju0fi" label="InR0 Jkup at FIX.IR">
          <goal label="Instrument ON?">
            <equal form="msg" site="dsi" var="fis">ON</equal>
          </goal>
          <check label="HOOK?">
            <equal form="msg" site="dsi" var="fhk">HOOK</equal>
          </check>
          <exec site="dsi" name="fjup"/>
          <wait label="Jack start?" retry="5">
            <equal form="msg" site="dsi" var="exe">ON</equal>
          </wait>
          <wait label="Jacking" retry="50">
            <equal form="msg" site="dsi" var="exe">OFF</equal>
          </wait>
        </item>
        <item id="ju4fi" label="InR4 Jkup at FIX.IR">
          <goal label="Jack Up?">
            <equal form="msg" site="dsi" var="fjb">UP</equal>
          </goal>
          <check label="UNHOOK?">
            <equal form="msg" site="dsi" var="fhk">UNHK</equal>
          </check>
          <exec site="dsi" name="fjup"/>
          <wait label="Jack start?" retry="5">
            <equal form="msg" site="dsi" var="exe">ON</equal>
          </wait>
          <wait label="Jacking" retry="50">
            <equal form="msg" site="dsi" var="exe">OFF</equal>
          </wait>
        </item>
        <item id="jd4fi" label="InR4 Jkdw at FIX.IR">
          <goal label="Jack Dw?">
            <equal form="msg" site="dsi" var="fjb">DW</equal>
          </goal>
          <check label="UNHOOK?">
            <equal form="msg" site="dsi" var="fhk">UNHK</equal>
          </check>
          <exec site="dsi" name="fjdw"/>
          <wait label="Jack start?" retry="5">
            <equal form="msg" site="dsi" var="exe">ON</equal>
          </wait>
          <wait label="Jacking" retry="50">
            <equal form="msg" site="dsi" var="exe">OFF</equal>
          </wait>
        </item>
      </unit>
      <unit id="unit_jmi" title="j[u|d][0|4]mi" label="Jack Up/Dw MOV.IR">
        <item id="jd0mi" label="InR0 Jkdw at MOV.IR">
          <goal label="Jack DW?">
            <equal form="msg" site="dsi" var="mjb">DW</equal>
          </goal>
          <check label="HOOK?">
            <equal form="msg" site="dsi" var="mis">ON</equal>
            <equal form="msg" site="dsi" var="mhk">HOOK</equal>
          </check>
          <exec site="dsi" name="mjdw"/>
          <wait label="Jack start?" retry="5">
            <equal form="msg" site="dsi" var="exe">ON</equal>
          </wait>
          <wait label="Jacking" retry="50">
            <equal form="msg" site="dsi" var="exe">OFF</equal>
          </wait>
        </item>
        <item id="ju0mi" label="InR0 Jkup at MOV.IR">
          <goal label="Instrument ON?">
            <equal form="msg" site="dsi" var="mis">ON</equal>
          </goal>
          <check label="HOOK?">
            <equal form="msg" site="dsi" var="mhk">HOOK</equal>
          </check>
          <exec site="dsi" name="mjup"/>
          <wait label="Jack start?" retry="5">
            <equal form="msg" site="dsi" var="exe">ON</equal>
          </wait>
          <wait label="Jacking" retry="50">
            <equal form="msg" site="dsi" var="exe">OFF</equal>
          </wait>
        </item>
        <item id="ju4mi" label="InR4 Jkup at MOV.IR">
          <goal label="Jack Up?">
            <equal form="msg" site="dsi" var="mjb">UP</equal>
          </goal>
          <check label="UNHOOK?">
            <equal form="msg" site="dsi" var="mhk">UNHK</equal>
          </check>
          <exec site="dsi" name="mjup"/>
          <wait label="Jack start?" retry="5">
            <equal form="msg" site="dsi" var="exe">ON</equal>
          </wait>
          <wait label="Jacking" retry="50">
            <equal form="msg" site="dsi" var="exe">OFF</equal>
          </wait>
        </item>
        <item id="jd4mi" label="InR4 Jkdw at MOV.IR">
          <goal label="Jack Dw?">
            <equal form="msg" site="dsi" var="mjb">DW</equal>
          </goal>
          <check label="UNHOOK?">
            <equal form="msg" site="dsi" var="mhk">UNHK</equal>
          </check>
          <exec site="dsi" name="mjdw"/>
          <wait label="Jack start?" retry="5">
            <equal form="msg" site="dsi" var="exe">ON</equal>
          </wait>
          <wait label="Jacking" retry="50">
            <equal form="msg" site="dsi" var="exe">OFF</equal>
          </wait>
        </item>
      </unit>
      <unit id="unit_jcs" title="j[u|d][0|4]cs" label="Jack Up/Dw CAS">
        <item id="jd0cs" label="InR0 Jkdw at CAS">
          <goal label="Jack DW?">
            <equal form="msg" site="dts" var="bl01">DW</equal>
          </goal>
          <check label="HOOK ON?">
            <equal form="msg" site="dts" var="cis">ON</equal>
            <equal form="msg" site="dts" var="iang">HOOK</equal>
          </check>
          <exec site="dts" name="jdw"/>
          <wait label="Jack start?" retry="5">
            <equal form="msg" site="dts" var="exe">ON</equal>
          </wait>
          <wait label="Jacking" retry="50">
            <equal form="msg" site="dts" var="exe">OFF</equal>
          </wait>
        </item>
        <item id="ju0cs" label="InR0 Jkup at CAS">
          <goal label="Instrument ON?">
            <equal form="msg" site="dts" var="cis">ON</equal>
          </goal>
          <check label="HOOK?">
            <equal form="msg" site="dts" var="iang">HOOK</equal>
          </check>
          <exec site="dts" name="jup"/>
          <wait label="Jack start?" retry="5">
            <equal form="msg" site="dts" var="exe">ON</equal>
          </wait>
          <wait label="Jacking" retry="50">
            <equal form="msg" site="dts" var="exe">OFF</equal>
          </wait>
        </item>
        <item id="ju4cs" label="InR4 Jkup at CAS">
          <goal label="Jack Up?">
            <equal form="msg" site="dts" var="bl01">UP</equal>
          </goal>
          <check label="UNHOOK?">
            <equal form="msg" site="dts" var="iang">UNHK</equal>
          </check>
          <exec site="dts" name="jup"/>
          <wait label="Jack start?" retry="5">
            <equal form="msg" site="dts" var="exe">ON</equal>
          </wait>
          <wait label="Jacking" retry="50">
            <equal form="msg" site="dts" var="exe">OFF</equal>
          </wait>
        </item>
        <item id="jd4cs" label="InR4 Jkdw at CAS">
          <goal label="Jack Dw?">
            <equal form="msg" site="dts" var="bl01">DW</equal>
          </goal>
          <check label="UNHOOK?">
            <equal form="msg" site="dts" var="iang">UNHK</equal>
          </check>
          <exec site="dts" name="jdw"/>
          <wait label="Jack start?" retry="5">
            <equal form="msg" site="dts" var="exe">ON</equal>
          </wait>
          <wait label="Jacking" retry="50">
            <equal form="msg" site="dts" var="exe">OFF</equal>
          </wait>
        </item>
      </unit>
    </group>
    <!--Atomic Flange Rotation Commands-->
    <group id="g_rot" caption="Atomic Flange Rotation Commands" rank="3">
      <unit id="unit_rtfo" title="r[0|4]fo" label="Rotate 0/4deg FIX.OPT">
        <item id="r0fo" label="Hook at FIX.OPT">
          <goal label="Hooked?">
            <equal form="msg" site="dso" var="fhk">HOOK</equal>
          </goal>
          <check label="EJB Down?">
            <equal form="msg" site="dso" var="fjb">DW</equal>
          </check>
          <exec site="dso" name="fhook"/>
          <wait label="Hook start?" retry="5">
            <equal form="msg" site="dso" var="exe">ON</equal>
          </wait>
          <wait label="Hooking" retry="40">
            <equal form="msg" site="dso" var="exe">OFF</equal>
          </wait>
        </item>
        <item id="r4fo" label="UnHook at FIX.OPT">
          <goal label="UnHooked?">
            <equal form="msg" site="dso" var="fhk">UNHK</equal>
          </goal>
          <check label="EJB Down?">
            <equal form="msg" site="dso" var="fjb">DW</equal>
          </check>
          <exec site="dso" name="funhk"/>
          <wait label="UnHook start?" retry="5">
            <equal form="msg" site="dso" var="exe">ON</equal>
          </wait>
          <wait label="UnHooking" retry="40">
            <equal form="msg" site="dso" var="exe">OFF</equal>
          </wait>
        </item>
      </unit>
      <unit id="unit_rtmo" title="r[0|4]mo" label="Rotate 0/4deg MOV.OPT">
        <item id="r0mo" label="Hook at MOV.OPT">
          <goal label="Hooked?">
            <equal form="msg" site="dso" var="mhk">HOOK</equal>
          </goal>
          <check label="EJB Down?">
            <equal form="msg" site="dso" var="mjb">DW</equal>
          </check>
          <exec site="dso" name="mhook"/>
          <wait label="Hook start?" retry="5">
            <equal form="msg" site="dso" var="exe">ON</equal>
          </wait>
          <wait label="Hooking" retry="40">
            <equal form="msg" site="dso" var="exe">OFF</equal>
          </wait>
        </item>
        <item id="r4mo" label="UnHook at MOV.OPT">
          <goal label="UnHooked?">
            <equal form="msg" site="dso" var="mhk">UNHK</equal>
          </goal>
          <check label="EJB Down?">
            <equal form="msg" site="dso" var="mjb">DW</equal>
          </check>
          <exec site="dso" name="munhk"/>
          <wait label="UnHook start?" retry="5">
            <equal form="msg" site="dso" var="exe">ON</equal>
          </wait>
          <wait label="UnHooking" retry="40">
            <equal form="msg" site="dso" var="exe">OFF</equal>
          </wait>
        </item>
      </unit>
      <unit id="unit_rtfi" title="r[0|4]fi" label="Rotate 0/4deg FIX.IR">
        <item id="r0fi" label="Hook at FIX.IR">
          <goal label="Hooked?">
            <equal form="msg" site="dsi" var="fhk">HOOK</equal>
          </goal>
          <check label="EJB Down?">
            <equal form="msg" site="dsi" var="fjb">DW</equal>
          </check>
          <exec site="dsi" name="fhook"/>
          <wait label="Hook start?" retry="5">
            <equal form="msg" site="dsi" var="exe">ON</equal>
          </wait>
          <wait label="Hooking" retry="40">
            <equal form="msg" site="dsi" var="exe">OFF</equal>
          </wait>
        </item>
        <item id="r4fi" label="UnHook at FIX.IR">
          <goal label="UnHooked?">
            <equal form="msg" site="dsi" var="fhk">UNHK</equal>
          </goal>
          <check label="EJB Down?">
            <equal form="msg" site="dsi" var="fjb">DW</equal>
          </check>
          <exec site="dsi" name="funhk"/>
          <wait label="UnHook start?" retry="5">
            <equal form="msg" site="dsi" var="exe">ON</equal>
          </wait>
          <wait label="UnHooking" retry="40">
            <equal form="msg" site="dsi" var="exe">OFF</equal>
          </wait>
        </item>
      </unit>
      <unit id="unit_rtmi" title="r[0|4]mi" label="Rotate 0/4deg MOV.IR">
        <item id="r0mi" label="Hook at MOV.IR">
          <goal label="Hooked?">
            <equal form="msg" site="dsi" var="mhk">HOOK</equal>
          </goal>
          <check label="EJB Down?">
            <equal form="msg" site="dsi" var="mjb">DW</equal>
          </check>
          <exec site="dsi" name="mhook"/>
          <wait label="Hook start?" retry="5">
            <equal form="msg" site="dsi" var="exe">ON</equal>
          </wait>
          <wait label="Hooking" retry="40">
            <equal form="msg" site="dsi" var="exe">OFF</equal>
          </wait>
        </item>
        <item id="r4mi" label="UnHook at MOV.IR">
          <goal label="UnHooked?">
            <equal form="msg" site="dsi" var="mhk">UNHK</equal>
          </goal>
          <check label="EJB Down?">
            <equal form="msg" site="dsi" var="mjb">DW</equal>
          </check>
          <exec site="dsi" name="munhk"/>
          <wait label="UnHook start?" retry="5">
            <equal form="msg" site="dsi" var="exe">ON</equal>
          </wait>
          <wait label="UnHooking" retry="40">
            <equal form="msg" site="dsi" var="exe">OFF</equal>
          </wait>
        </item>
      </unit>
      <unit id="unit_rtcs" title="r[0|4]cs" label="Rotate 0/4deg CAS">
        <item id="r0cs" label="Hook at CAS">
          <goal label="Hooked?">
            <equal form="msg" site="dts" var="iang">HOOK</equal>
          </goal>
          <check label="EJB Down?">
            <equal form="msg" site="dts" var="bl01">DW</equal>
          </check>
          <exec site="dts" name="rhook"/>
          <wait label="Hook start?" retry="5">
            <equal form="msg" site="dts" var="exe">ON</equal>
          </wait>
          <wait label="Hooking" retry="40">
            <equal form="msg" site="dts" var="exe">OFF</equal>
          </wait>
        </item>
        <item id="r4cs" label="UnHook at CAS">
          <goal label="UnHooked?">
            <equal form="msg" site="dts" var="iang">UNHK</equal>
          </goal>
          <check label="EJB Down?">
            <equal form="msg" site="dts" var="bl01">DW</equal>
          </check>
          <exec site="dts" name="runhk"/>
          <wait label="UnHook start?" retry="5">
            <equal form="msg" site="dts" var="exe">ON</equal>
          </wait>
          <wait label="UnHooking" retry="40">
            <equal form="msg" site="dts" var="exe">OFF</equal>
          </wait>
        </item>
      </unit>
      <unit id="unit_adj" title="adj[0|4]" label="Adjust 0/4deg CAS">
        <item id="adj0" label="Adjust at CAS.Hook">
          <check label="Hooked and EJB Up?">
            <equal form="msg" site="dts" var="iang">HOOK</equal>
            <equal form="msg" site="dts" var="bl01">UP</equal>
          </check>
          <exec site="dts" name="rhook"/>
          <wait label="Hook start?" retry="5">
            <equal form="msg" site="dts" var="exe">ON</equal>
          </wait>
          <wait label="Hooking" retry="40">
            <equal form="msg" site="dts" var="exe">OFF</equal>
          </wait>
        </item>
        <item id="adj4" label="Adjust at at CAS.Unhook">
          <check label="Unhooked and EJB Up?">
            <equal form="msg" site="dts" var="iang">UNHK</equal>
            <equal form="msg" site="dts" var="bl01">UP</equal>
          </check>
          <exec site="dts" name="runhk"/>
          <wait label="UnHook start?" retry="5">
            <equal form="msg" site="dts" var="exe">ON</equal>
          </wait>
          <wait label="UnHooking" retry="40">
            <equal form="msg" site="dts" var="exe">OFF</equal>
          </wait>
        </item>
      </unit>
    </group>
    <!--Atomic Movable Flange Commands-->
    <group id="g_mov" caption="Atomic Movable Flange Commands" rank="3">
      <unit id="unit_almo" title="a[f|s]mo" label="Align Front/Side MOV.OPT">
        <item id="afmo" label="Align Front MOV.OPT">
          <goal label="Rotation Stored?">
            <equal form="msg" site="dso" var="mrt">LOAD</equal>
          </goal>
          <check>
            <equal form="msg" site="dso" var="mrt">STORE</equal>
            <equal form="msg" site="dso" var="mhk">HOOK</equal>
            <equal form="msg" site="dso" var="mtr">FW</equal>
          </check>
          <exec site="dso" name="rotout"/>
          <wait label="Rotate start?" retry="5">
            <equal form="msg" site="dso" var="exe">ON</equal>
          </wait>
          <wait label="Rotating" retry="20">
            <equal form="msg" site="dso" var="exe">OFF</equal>
          </wait>
        </item>
        <item id="asmo" label="Align Side MOV.OPT">
          <goal label="Rotation Stored?">
            <equal form="msg" site="dso" var="mrt">STORE</equal>
          </goal>
          <check>
            <equal form="msg" site="dso" var="mrt">LOAD</equal>
            <equal form="msg" site="dso" var="mhk">HOOK</equal>
            <equal form="msg" site="dso" var="mtr">FW</equal>
          </check>
          <exec site="dso" name="rotin"/>
          <wait label="Rotate start?" retry="5">
            <equal form="msg" site="dso" var="exe">ON</equal>
          </wait>
          <wait label="Rotating" retry="20">
            <equal form="msg" site="dso" var="exe">OFF</equal>
          </wait>
        </item>
      </unit>
      <unit id="unit_trmo" title="t[f|b]mo" label="Transer Forth/Back MOV.OPT">
        <item label="Transer Forth MOV.OPT" id="tfmo">
          <goal label="Transer Stored?">
            <equal form="msg" site="dso" var="mtr">FW</equal>
          </goal>
          <check>
            <equal form="msg" site="dso" var="mrt">STORE</equal>
            <equal form="msg" site="dso" var="mhk">HOOK</equal>
            <equal form="msg" site="dso" var="mtr">BK</equal>
          </check>
          <exec site="dso" name="trout"/>
          <wait label="Transer start?" retry="5">
            <equal form="msg" site="dso" var="exe">ON</equal>
          </wait>
          <wait label="Moving" retry="60">
            <equal form="msg" site="dso" var="exe">OFF</equal>
          </wait>
        </item>
        <item id="tbmo" label="Transer Back MOV.OPT">
          <goal label="Transer Stored?">
            <equal form="msg" site="dso" var="mtr">BK</equal>
          </goal>
          <check>
            <equal form="msg" site="dso" var="mrt">STORE</equal>
            <equal form="msg" site="dso" var="mhk">HOOK</equal>
            <equal form="msg" site="dso" var="mtr">FW</equal>
          </check>
          <exec site="dso" name="trin"/>
          <wait label="Transer start?" retry="5">
            <equal form="msg" site="dso" var="exe">ON</equal>
          </wait>
          <wait label="Moving" retry="60">
            <equal form="msg" site="dso" var="exe">OFF</equal>
          </wait>
        </item>
      </unit>
      <unit id="unit_aldmi" title="a[f|s]mi" label="Align Front/Side MOV.IR">
        <item id="afmi" label="Align Front MOV.IR">
          <goal label="Rotation Stored?">
            <equal form="msg" site="dsi" var="mrt">LOAD</equal>
          </goal>
          <check>
            <equal form="msg" site="dsi" var="mrt">STORE</equal>
            <equal form="msg" site="dsi" var="mhk">HOOK</equal>
            <equal form="msg" site="dsi" var="mtr">FW</equal>
          </check>
          <exec site="dsi" name="rotout"/>
          <wait label="Rotate start?" retry="5">
            <equal form="msg" site="dsi" var="exe">ON</equal>
          </wait>
          <wait label="Rotating" retry="20">
            <equal form="msg" site="dsi" var="exe">OFF</equal>
          </wait>
        </item>
        <item id="asmi" label="Align Side MOV.IR">
          <goal label="Rotation Stored?">
            <equal form="msg" site="dsi" var="mrt">STORE</equal>
          </goal>
          <check>
            <equal form="msg" site="dsi" var="mrt">LOAD</equal>
            <equal form="msg" site="dsi" var="mhk">HOOK</equal>
            <equal form="msg" site="dsi" var="mtr">FW</equal>
          </check>
          <exec site="dsi" name="rotin"/>
          <wait label="Rotate start?" retry="5">
            <equal form="msg" site="dsi" var="exe">ON</equal>
          </wait>
          <wait label="Rotating" retry="20">
            <equal form="msg" site="dsi" var="exe">OFF</equal>
          </wait>
        </item>
      </unit>
      <unit id="unit_trmi" title="t[f|b]mi" label="Transer Forth/Back MOV.IR">
        <item id="tfmi" label="Transer Forth MOV.IR">
          <goal label="Transer Stored?">
            <equal form="msg" site="dsi" var="mtr">FW</equal>
          </goal>
          <check>
            <equal form="msg" site="dsi" var="mrt">STORE</equal>
            <equal form="msg" site="dsi" var="mhk">HOOK</equal>
            <equal form="msg" site="dsi" var="mtr">BK</equal>
          </check>
          <exec site="dsi" name="trout"/>
          <wait label="Transer start?" retry="5">
            <equal form="msg" site="dsi" var="exe">ON</equal>
          </wait>
          <wait label="Moving" retry="60">
            <equal form="msg" site="dsi" var="exe">OFF</equal>
          </wait>
        </item>
        <item id="tbmi" label="Transer Back MOV.IR">
          <goal label="Transer Stored?">
            <equal form="msg" site="dsi" var="mtr">BK</equal>
          </goal>
          <check>
            <equal form="msg" site="dsi" var="mrt">STORE</equal>
            <equal form="msg" site="dsi" var="mhk">HOOK</equal>
            <equal form="msg" site="dsi" var="mtr">FW</equal>
          </check>
          <exec site="dsi" name="trin"/>
          <wait label="Transer start?" retry="5">
            <equal form="msg" site="dsi" var="exe">ON</equal>
          </wait>
          <wait label="Moving" retry="60">
            <equal form="msg" site="dsi" var="exe">OFF</equal>
          </wait>
        </item>
      </unit>
    </group>
    <!--Atomic Cart Commands-->
    <group id="g_cart" caption="Atomic Cart Commands" rank="3">
      <unit id="unit_run" label="Cart Run Commands">
        <item id="runfw" label="Run Forward and Wait to Tag">
          <goal label="On Tag?">
            <not form="data" site="crt" var="cps">0</not>
          </goal>
          <mesg label="Clear the way?"/>
          <wait retry="5" label="Ready?">
            <equal form="msg" site="crt" var="rdy">ON</equal>
          </wait>
          <exec site="crt" name="runf"/>
          <wait retry="5" label="Run start?">
            <equal form="msg" site="crt" var="run">ON</equal>
          </wait>
          <wait retry="40" label="Run end?">
            <equal form="msg" site="crt" var="run">OFF</equal>
          </wait>
        </item>
        <item id="runw" label="Run and Wait to Tag [1-12]">
          <par_num label="1-12">1:12</par_num>
          <goal label="On Destination Tag?">
            <equal form="data" site="crt" var="cps">$1</equal>
          </goal>
          <check label="Ready?">
            <equal form="msg" site="crt" var="rdy">ON</equal>
          </check>
          <exec site="crt" name="run">
            <argv>$1</argv>
          </exec>
          <wait retry="5" label="Run start?">
            <equal form="msg" site="crt" var="run">ON</equal>
          </wait>
          <wait retry="120" label="Run end?">
            <equal form="msg" site="crt" var="run">OFF</equal>
          </wait>
        </item>
      </unit>
      <unit id="unit_lft" title="lft[0-3]" label="Cart Lift Commands">
        <item id="lft0" label="Lift Down and Wait">
          <goal label="Already Down?">
            <equal form="msg" site="crt" var="jlv">D</equal>
          </goal>
          <check label="Ready?">
            <equal form="msg" site="crt" var="rdy">ON</equal>
          </check>
          <exec site="crt" name="lftdw"/>
          <wait label="Jack start?" retry="5">
            <equal form="msg" site="crt" var="jak">ON</equal>
          </wait>
          <wait label="Jacking" retry="40">
            <equal form="msg" site="crt" var="jak">OFF</equal>
          </wait>
        </item>
        <item id="lft1" label="Lift Up and Wait Level1">
          <goal label="Above Level D?">
            <not form="msg" site="crt" var="jlv">D</not>
          </goal>
          <check label="Ready?">
            <equal form="msg" site="crt" var="rdy">ON</equal>
            <equal form="msg" site="crt" var="jlv">D</equal>
          </check>
          <exec site="crt" name="lftup">
            <argv>1</argv>
          </exec>
          <wait label="Jack start?" retry="5">
            <equal form="msg" site="crt" var="jak">ON</equal>
          </wait>
          <wait label="Jacking" retry="40">
            <equal form="msg" site="crt" var="jak">OFF</equal>
          </wait>
        </item>
        <item id="lft2" label="Lift Up and Wait Level2">
          <goal label="Above Level L?">
            <not form="msg" site="crt" var="jlv">D</not>
            <not form="msg" site="crt" var="jlv">L</not>
          </goal>
          <check label="Ready?">
            <equal form="msg" site="crt" var="rdy">ON</equal>
            <equal form="msg" site="crt" var="jlv">L</equal>
          </check>
          <exec site="crt" name="lftup">
            <argv>2</argv>
          </exec>
          <wait label="Jack start?" retry="5">
            <equal form="msg" site="crt" var="jak">ON</equal>
          </wait>
          <wait label="Jacking" retry="40">
            <equal form="msg" site="crt" var="jak">OFF</equal>
          </wait>
        </item>
        <item id="lft3" label="Lift Up and Wait Level3">
          <goal label="Above Level M?">
            <not form="msg" site="crt" var="jlv">D</not>
            <not form="msg" site="crt" var="jlv">L</not>
            <not form="msg" site="crt" var="jlv">M</not>
          </goal>
          <check label="Ready?">
            <equal form="msg" site="crt" var="rdy">ON</equal>
            <equal form="msg" site="crt" var="jlv">M</equal>
          </check>
          <exec site="crt" name="lftup">
            <argv>3</argv>
          </exec>
          <wait label="Jack start?" retry="5">
            <equal form="msg" site="crt" var="jak">ON</equal>
          </wait>
          <wait label="Jacking" retry="40">
            <equal form="msg" site="crt" var="jak">OFF</equal>
          </wait>
        </item>
      </unit>
    </group>
    <!--Atomic Config Commands-->
    <group id="g_assign" caption="Atomic Config Commands" rank="3">
      <unit id="unit_assign" label="Assign Current Inst Commands">
        <item id="focas" label="Assign Current Inst to FOCAS">
          <goal label="Assigned?">
            <equal form="msg" site="crt" var="ist">FOCAS</equal>
            <equal form="msg" site="dts" var="iid">FOCAS</equal>
          </goal>
          <cfg site="crt" name="focas"/>
          <cfg site="dts" name="focas"/>
        </item>
        <item id="moircs" label="Assign Current Inst to MOIRCS">
          <goal label="Assigned?">
            <equal form="msg" site="crt" var="ist">MOIRCS</equal>
            <equal form="msg" site="dts" var="iid">MOIRCS</equal>
          </goal>
          <cfg site="crt" name="moircs"/>
          <cfg site="dts" name="moircs"/>
        </item>
        <item id="comics" label="Assign Current Inst to COMICS">
          <goal label="Assigned?">
            <equal form="msg" site="crt" var="ist">COMICS</equal>
            <equal form="msg" site="dts" var="iid">COMICS</equal>
          </goal>
          <cfg site="crt" name="comics"/>
          <cfg site="dts" name="comics"/>
        </item>
        <item id="k3d" label="Assign Current Inst to Kyoto 3D">
          <goal label="Assigned?">
            <equal form="msg" site="crt" var="ist">MCS</equal>
            <equal form="msg" site="dts" var="iid">MCS</equal>
          </goal>
          <cfg site="crt" name="mcs"/>
          <cfg site="dts" name="mcs"/>
        </item>
      </unit>
      <unit id="unit_tsc" label="TSC commands">
        <item id="init" label="Initialize TSC">
          <cfg site="dts" name="startup"/>
        </item>
        <item id="shutdown" label="Shutdown TSC">
          <cfg site="dts" name="shutdown"/>
        </item>
      </unit>
    </group>
  </macro>
</mdb>
