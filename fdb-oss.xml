<?xml version="1.0" encoding="utf-8"?>
<fdb xmlns="http://ciax.sum.naoj.org/ciax-xml/fdb">
  <frame id="oss" label="OSS Command line" version="2">
    <stream timeout="180"/>
    <cmdframe xmlns="http://ciax.sum.naoj.org/ciax-xml/fdbc">
      <body/>
      <char length="1" label="Suffix">0xa</char>
    </cmdframe>
    <command xmlns="http://ciax.sum.naoj.org/ciax-xml/fdbc">
      <group id="gst" caption="Status">
        <item id="getstat" label="InR status" response="getstat" type="stat">
          <string label="Status Command">gen2prt</string>
          <string label="InR Select(NsOpt/NsIR/Cas)"> TSCV.RotatorType</string>
          <string label="InR Drive ON/OFF"> TSCV.InsRotRotation</string>
          <string label="InR Pin Sensor"> CXWS.TSCV.0_SENSOR</string>
        </item>
        <item id="jakstat" label="Jack Bolt Status" response="jakstat" type="stat">
          <string label="Status Command">gen2prt</string>
          <string label="Bolt Each Status"> CXWS.TSCV.POWER_V1</string>
        </item>
        <item id="jaklen" label="Jack Bolt Length" response="jaklen" type="stat">
          <string label="Status Command">gen2prt</string>
          <string label="Bolt Each Position"> CXWS.TSCV.POWER_V2</string>
        </item>
        <item id="zlen" label="Z Sensor Length" response="zlen" type="stat">
          <string label="Status Command">gen2prt</string>
          <string label="Zsensor Each Position"> CXWS.TSCL.Z_SENSOR</string>
        </item>
        <item id="telstat" label="Telescope Status" response="telstat" type="stat">
          <string label="Status Command">gen2prt</string>
          <string label="Stow pin Status"> CXWS.TSCV.STOW_1</string>
          <string label="Shutter Status"> CXWS.TSCV.SHUTTER</string>
          <string label="AZ/EL Drive Status"> CXWS.TSCV.TELDRIVE</string>
          <string label="EL Angle(deg)"> CXWS.TSCS.EL</string>
        </item>
        <item id="inrang" label="Cas InR Angle" response="inrang" type="stat">
          <string label="Status Command">gen2prt</string>
          <string label="InR Angle(deg)"> CXWS.TSCS.INSROT</string>
        </item>
        <item id="comerr" label="Comm Error" response="comerr" type="stat">
          <string label="Status Command">gen2prt</string>
          <string label="CIAX-MLP3 Comm Error"> CXWS.TSCV.CIAX_MLP3_FAULT</string>
        </item>
        <item id="iststat" label="Instrument ID" response="iststat" type="stat">
          <string label="Status Command">gen2prt</string>
          <string label="CAS Instrument"> CXWS.TSCV.OBE_INR</string>
        </item>
        <item id="logstat" label="Login Status" response="logstat" type="stat">
          <string label="Status Command">gen2prt</string>
          <string label="LOGIN 0"> TSCV.TSC.LOGIN0</string>
          <string label="LOGIN 1"> TSCV.TSC.LOGIN1</string>
          <string label="LOGIN 2"> TSCV.TSC.LOGIN2</string>
          <string label="LOGIN 3"> TSCV.TSC.LOGIN3</string>
        </item>
        <item id="getexit" label="Exit Code" response="exit" type="stat">
          <string>gen2exe</string>
        </item>
        <item id="getpid" label="Running?" response="pid" type="stat">
          <string>gen2exe -b</string>
        </item>
      </group>
      <group id="gcfg" caption="Configuration">
        <item id="login" label="TSC Login" response="exit" type="config">
          <string>gen2cmd</string>
          <string> login</string>
        </item>
        <item id="logout" label="TSC Login" response="exit" type="config">
          <string>gen2cmd</string>
          <string> logout</string>
        </item>
        <item id="init" label="Status Delivery Request" response="exit" type="config">
          <string>gen2cmd</string>
          <string> init</string>
        </item>
        <item id="tsconly" label="TSC Only Mode(CIAX Mode)" response="exit" type="config">
          <string>gen2cmd</string>
          <string> tsconly</string>
        </item>
        <item id="tscpri" label="TSC Primaly Mode(OBS Mode)" response="exit" type="config">
          <string>gen2cmd</string>
          <string> tscpri</string>
        </item>
        <item id="setinst" label="Set Instrument ID [0-12]" response="exit" type="config">
          <par_num>1:12</par_num>
          <string>gen2cmd</string>
          <string> setinst </string>
          <string format="%02d">$1</string>
        </item>
      </group>
      <group id="gdrv" caption="Drive">
        <item id="ron" label="InR Drive ON" response="exit" type="action">
          <string>gen2cmd</string>
          <string> ron</string>
        </item>
        <item id="roff" label="InR Drive OFF" response="exit" type="action">
          <string>gen2cmd</string>
          <string> roff</string>
        </item>
        <item id="jon" label="Jack Drive ON" response="exit" type="action">
          <string>gen2cmd</string>
          <string> jon</string>
        </item>
        <item id="joff" label="Jack Drive OFF" response="exit" type="action">
          <string>gen2cmd</string>
          <string> joff</string>
        </item>
        <item id="jres" label="Jack Drive Reset" response="exit" type="action">
          <string>gen2cmd</string>
          <string> jres</string>
        </item>
      </group>
      <group id="gact" caption="Action">
        <item id="rhook" label="InR Hook(0deg)" response="exit" type="action">
          <string>gen2cmd</string>
          <string> rhook</string>
        </item>
        <item id="runhk" label="InR UnHook(-4deg)" response="exit" type="action">
          <string>gen2cmd</string>
          <string> runhk</string>
        </item>
        <item id="rstop" label="InR Stop" response="exit" type="action">
          <string>gen2cmd</string>
          <string> rstop</string>
        </item>
        <item id="ajup" label="All EJB Up" response="exit" type="action">
          <string>gen2cmd</string>
          <string> ajup</string>
        </item>
        <item id="ajdw" label="All EJB Down" response="exit" type="action">
          <string>gen2cmd</string>
          <string> ajdw</string>
        </item>
        <item id="ajstop" label="All EJB Stop" response="exit" type="action">
          <string>gen2cmd</string>
          <string> ajstop</string>
        </item>
        <item id="jup" label="EJB Up [#]" response="exit" type="action">
          <par_num>1:16</par_num>
          <string>gen2cmd</string>
          <string> jup </string>
          <string format="%02d">$1*3+1</string>
        </item>
        <item id="jdw" label="EJB Down [#]" response="exit" type="action">
          <par_num>1:16</par_num>
          <string>gen2cmd</string>
          <string> jdw </string>
          <string format="%02d">$1*3+2</string>
        </item>
        <item id="jstop" label="EJB Stop [num]" response="exit" type="action">
          <par_num>1:16</par_num>
          <string>gen2cmd</string>
          <string> jdw </string>
          <string format="%02d">$1*3+3</string>
        </item>
      </group>
    </command>
    <rspframe xmlns="http://ciax.sum.naoj.org/ciax-xml/fdbr">
      <body/>
    </rspframe>
    <response xmlns="http://ciax.sum.naoj.org/ciax-xml/fdbr">
      <item id="getstat">
        <!--TSCMON-->
        <field assign="rsel" label="InR Select(NsOpt/NsIR/Cas)" delimiter="\n"/>
        <!--MCUMON-->
        <field assign="rpw" label="InR Drive ON/OFF" delimiter="\n"/>
        <field assign="bstat" decode="hexstr" label="BOLT System Status" delimiter="\n"/>
      </item>
      <item id="telstat">
        <field assign="stow_1" decode="hexstr" label="Stow pin Status" delimiter="\n"/>
        <field assign="shutter" decode="hexstr" label="Shutter Status" delimiter="\n"/>
        <field assign="teldrive" decode="hexstr" label="AZ/EL Drive Status" delimiter="\n"/>
        <field assign="el" label="EL Angle(deg)" delimiter="\n"/>
      </item>
      <item id="comerr">
        <field assign="mlp3" label="CIAX-MLP3 Comm Error" delimiter="\n"/>
      </item>
      <item id="iststat">
        <field assign="iid" label="CAS Instrument" delimiter="\n"/>
      </item>
      <item id="jakstat">
        <!--POWER_V1-->
        <field assign="bsa" label="BOLT SUM ALM(B0)" length="2" decode="hexstr"/>
        <field assign="abs" label="ALL BOLT STAT(B0:Anchord,B2:Stop,B4:Ready)" length="2" decode="hexstr"/>
        <!--Order:2,1,4,3..-->
        <array assign="bs" label="EACH BOLT STAT(B0:Anchord,B2:Stop,B3:Ready)" length="1" decode="hexstr">
          <index size="16"/>
        </array>
        <array assign="bl" label="Each Bolt Limit(DrvAlm,UP,DW,UnitAlm)" length="1" decode="hexstr">
          <!--Order:2,1,4,3..-->
          <index size="16"/>
        </array>
        <field assign="mba" label="MLP3-BOLT COMM ALM(18:B0)" length="2" decode="hexstr"/>
        <field assign="loc" label="CS BOLT LOCAL(19:B0)" length="2" decode="hexstr"/>
        <array assign="clm" label="CS BOLT Current Limit(20-21)" length="2" decode="hexstr">
          <index size="2"/>
        </array>
      </item>
      <item id="jaklen">
        <!--POWER_V2-->
        <array assign="jk" label="Bolt Position" length="12" slice="0:6" decode="decstr">
          <index size="16"/>
        </array>
      </item>
      <item id="zlen">
        <!--Z_SENSOR-->
        <array assign="zp" label="Zsensor Position" length="12" slice="0:6">
          <index size="4"/>
        </array>
      </item>
      <item id="inrang">
        <field assign="iang" label="InR Angle(deg)" delimiter="\n"/>
      </item>
      <item id="logstat">
        <field assign="login0" label="LOGIN 0" delimiter="\n"/>
        <field assign="login1" label="LOGIN 1" delimiter="\n"/>
        <field assign="login2" label="LOGIN 2" delimiter="\n"/>
        <field assign="login3" label="LOGIN 3" delimiter="\n"/>
      </item>
      <item id="exit">
        <field assign="exit" label="Exit Code" delimiter="\n"/>
      </item>
      <item id="pid">
        <field assign="pid" label="Background Process ID" delimiter="\n"/>
      </item>
    </response>
  </frame>
</fdb>
