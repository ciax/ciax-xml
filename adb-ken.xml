<?xml version="1.0" encoding="utf-8"?>
<adb xmlns="http://ciax.sum.naoj.org/ciax-xml/adb">
  <app frm_id="ken" id="ken" label="Kenwood Power Supply 1">
    <commands xmlns="http://ciax.sum.naoj.org/ciax-xml/adbc">
      <group id="g0" caption="Device">
        <item id="upd" label="Update Status">
          <repeat from="0" to="2" counter="u">
            <frmcmd name="getst0">
              <argv>$u</argv>
              <argv>($u&amp;1)*2+2</argv>
            </frmcmd>
            <frmcmd name="ack"/>
          </repeat>
        </item>
        <item id="getconf1" label="Get Config Data">
          <!--Get Old version-->
          <repeat from="0" to="1" counter="u">
            <frmcmd name="getst1o">
              <argv>$u</argv>
              <argv>($u&amp;1)*2+2</argv>
            </frmcmd>
            <frmcmd name="ack"/>
            <frmcmd name="getst2o">
              <argv>$u</argv>
              <argv>($u&amp;1)*2+2</argv>
            </frmcmd>
            <frmcmd name="ack"/>
          </repeat>
          <!--Get New version-->
          <frmcmd name="getst1">
            <argv>2</argv>
            <argv>2</argv>
          </frmcmd>
          <frmcmd name="ack"/>
          <frmcmd name="getst2">
            <argv>2</argv>
            <argv>2</argv>
          </frmcmd>
          <frmcmd name="ack"/>
          <!--Get Common-->
          <repeat from="0" to="2" counter="c">
            <frmcmd name="getst3">
              <argv>$c</argv>
            </frmcmd>
            <frmcmd name="ack"/>
          </repeat>
        </item>
        <item id="getconf2" label="Get Config Data">
          <!--Get New version-->
          <repeat from="0" to="1" counter="u">
            <frmcmd name="getst1">
              <argv>$u</argv>
              <argv>($u&amp;1)*2+2</argv>
            </frmcmd>
            <frmcmd name="ack"/>
            <frmcmd name="getst2">
              <argv>$u</argv>
              <argv>($u&amp;1)*2+2</argv>
            </frmcmd>
            <frmcmd name="ack"/>
          </repeat>
          <!--Get Old version-->
          <frmcmd name="getst1o">
            <argv>2</argv>
            <argv>2</argv>
          </frmcmd>
          <frmcmd name="ack"/>
          <frmcmd name="getst2o">
            <argv>2</argv>
            <argv>2</argv>
          </frmcmd>
          <frmcmd name="ack"/>
          <!--Get Common-->
          <repeat from="0" to="2" counter="c">
            <frmcmd name="getst3">
              <argv>$c</argv>
            </frmcmd>
            <frmcmd name="ack"/>
          </repeat>
        </item>
      </group>
    </commands>
    <status xmlns="http://ciax.sum.naoj.org/ciax-xml/adbs" symtbl="ken">
      <repeat_grp from="0" to="0" counter="c">
        <group id="gs$c" caption="UNIT $c STAT" column="4">
          <integer id="model$c" label="Model" symbol="model">
            <field ref="ms3" index="$c"/>
          </integer>
          <integer id="disp$c" label="Display CH" symbol="disp">
            <field ref="ms2" index="$c:0"/>
          </integer>
          <integer id="main$c" label="Main Output" symbol="action">
            <field ref="ms2" index="$c:1"/>
          </integer>
          <integer id="pr$c" label="Protect" symbol="action">
            <field ref="ms2" index="$c:2"/>
          </integer>
          <integer id="tr$c" label="Tracking SW" symbol="action">
            <field ref="ms2" index="$c:3"/>
          </integer>
          <integer id="trm$c" label="Traking Mode" symbol="tmode">
            <field ref="ms2" index="$c:6"/>
          </integer>
          <integer id="pre$c" label="Preset Sel">
            <field ref="ms2" index="$c:4"/>
          </integer>
          <integer id="dly$c" label="Delay" symbol="action">
            <field ref="ms2" index="$c:5"/>
          </integer>
        </group>
      </repeat_grp>
      <repeat_grp from="0" to="0" counter="u">
        <group id="gu$u" caption="Output $u" column="5">
          <repeat_var from="0" to="($u&amp;1)*2+1" counter="c">
            <float id="v$u$c" label="Voltage(V) CH$c" format="%5.2f" formula="$#/100">
              <field ref="ms0" index="$u:$c:0" />
            </float>
            <float id="i$u$c" label="Current(A) CH$c" format="%5.2f" formula="$#/100">
              <field ref="ms0" index="$u:$c:1" />
            </float>
            <string id="mch$u$c" label="Mode CH$c" symbol="cmode">
              <field ref="st0" index="$u:$c:0"/>
            </string>
            <integer id="sch$u$c" label="Select CH$c" symbol="action">
              <field ref="st0" index="$u:$c:1"/>
            </integer>
            <integer id="tch$u$c" label="Track CH$c" symbol="action">
              <field ref="st0" index="$u:$c:2"/>
            </integer>
          </repeat_var>
        </group>
      </repeat_grp>
      <repeat_grp from="0" to="1" counter="c">
        <group id="gp0$c" caption="Preset UNIT A $cCH" column="4">
          <repeat_var from="0" to="3" counter="p">
            <float id="pv0$c$p" label="#$p (V)" format="%5.2f" formula="$#/100">
              <field ref="ms1" index="0:$p:$c*2" />
            </float>
          </repeat_var>
          <repeat_var from="0" to="3" counter="p">
            <float id="pi0$c$p" label="#$p (A)" format="%5.2f" formula="$#/100">
              <field ref="ms1" index="0:$p:$c*2+1" />
            </float>
          </repeat_var>
        </group>
      </repeat_grp>
      <group id="gpd0" caption="Preset Delay A" column="4">
        <repeat_var from="0" to="3" counter="p">
          <integer id="pdp0$p" label="#$p Delay p/n">
            <field ref="ms1" index="0:$p:4" />
          </integer>
        </repeat_var>
        <repeat_var from="0" to="3" counter="p">
          <float id="pdt0$p" label="#$p Delay time" format="%5.2f" formula="$#/100">
            <field ref="ms1" index="0:$p:5" />
          </float>
        </repeat_var>
        <repeat_var from="0" to="3" counter="p">
          <integer id="ptr0$p" label="#$p Tracking" symbol="action">
            <field ref="ms1" index="0:$p:6" />
          </integer>
        </repeat_var>
      </group>
      <repeat_grp from="0" to="3" counter="c">
        <group id="gp1$c" caption="Preset UNIT B $cCH" column="4">
          <repeat_var from="0" to="3" counter="p">
            <float id="pv1$c$p" label="#$p (V)" format="%5.2f" formula="$#/100">
              <field ref="ms1" index="1:$p:$c*2" />
            </float>
          </repeat_var>
          <repeat_var from="0" to="3" counter="p">
            <float id="pi1$c$p" label="#$p (A)" format="%5.2f" formula="$#/100">
              <field ref="ms1" index="1:$p:$c*2+1" />
            </float>
          </repeat_var>
        </group>
      </repeat_grp>
      <group id="gpd1" caption="Preset Delay B" column="4">
        <repeat_var from="0" to="3" counter="p">
          <integer id="pdp1$p" label="#$p Delay p/n">
            <field ref="ms1" index="1:$p:8" />
          </integer>
        </repeat_var>
        <repeat_var from="0" to="3" counter="p">
          <float id="pdt1$p" label="#$p Delay time" format="%5.2f" formula="$#/100">
            <field ref="ms1" index="1:$p:9" />
          </float>
        </repeat_var>
        <repeat_var from="0" to="3" counter="p">
          <integer id="ptr1$p" label="#$p Tracking" symbol="action">
            <field ref="ms1" index="1:$p:10" />
          </integer>
        </repeat_var>
      </group>
      <repeat_grp from="0" to="1" counter="c">
        <group id="gp2$c" caption="Preset UNIT C $cCH" column="4">
          <repeat_var from="0" to="3" counter="p">
            <float id="pv2$c$p" label="#$p (V)" format="%5.2f" formula="$#/100">
              <field ref="ms1" index="2:$p:$c*2" />
            </float>
          </repeat_var>
          <repeat_var from="0" to="3" counter="p">
            <float id="pi2$c$p" label="#$p (A)" format="%5.2f" formula="$#/100">
              <field ref="ms1" index="2:$p:$c*2+1" />
            </float>
          </repeat_var>
        </group>
      </repeat_grp>
      <group id="gpd2" caption="Preset Delay C" column="4">
        <repeat_var from="0" to="3" counter="p">
          <integer id="pdp2$p" label="#$p Delay p/n">
            <field ref="ms1" index="2:$p:4" />
          </integer>
        </repeat_var>
        <repeat_var from="0" to="3" counter="p">
          <float id="pdt2$p" label="#$p Delay time" format="%5.2f" formula="$#/100">
            <field ref="ms1" index="2:$p:5" />
          </float>
        </repeat_var>
        <repeat_var from="0" to="3" counter="p">
          <integer id="ptr2$p" label="#$p Tracking" symbol="action">
            <field ref="ms1" index="2:$p:6" />
          </integer>
        </repeat_var>
      </group>
    </status>
  </app>
</adb>
