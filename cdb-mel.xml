<?xml version='1.0' encoding='ISO-8859-1'?>
<cdb xsi:schemaLocation='http://ciax.sum.naoj.org/ciax-xml/schema/cdb.xsd' xmlns='http://ciax.sum.naoj.org/ciax-xml/cdb' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'>
  <class device='mel' id='mel' label='Cart PLC'>
    <commands>
      <session id='upd' label='Regular status update'>
        <statement>
          <text>getstat</text>
        </statement>
        <statement>
          <text>chken</text>
        </statement>
      </session>
      <session id='start_run' label='Running Start'>
        <statement>
          <text>start</text>
          <text>1</text>
        </statement>
      </session>
      <session id='start_jak' label='Jacking Start'>
        <statement>
          <text>start</text>
          <formula>0x100</formula>
        </statement>
      </session>
      <session id='clear_trg' label='Jacking Start'>
        <statement>
          <text>clear</text>
        </statement>
      </session>
      <session id='set_fwd' label='Set Tag to Forward'>
        <statement>
          <text>set_tag</text>
          <text>98</text>
        </statement>
      </session>
      <session id='set_run1' label='Run to Tag 1'>
        <statement>
          <text>set_tag</text>
          <text>1</text>
        </statement>
      </session>
      <session id='set_jak1' label='Jack UP Level 1'>
        <statement>
          <text>set_pos</text>
          <text>2</text>
        </statement>
      </session>
      <session id='pause' label='Pause'>
        <statement>
          <text>stop</text>
          <text>0</text>
        </statement>
      </session>
      <session id='emstop' label='Emergency Stop'>
        <statement>
          <text>stop</text>
          <text>1</text>
        </statement>
      </session>
      <session id='resume' label='Resume from Pause'>
        <statement>
          <text>clear</text>
        </statement>
      </session>
      <session id='get_tbl' label='Get Jack Table'>
        <repeat counter='t' from='0' to='5'>
          <repeat counter='j' from='0' to='3'>
            <statement>
              <text>get_tbl</text>
              <formula>$t</formula>
              <formula>$j</formula>
            </statement>
          </repeat>
        </repeat>
      </session>
      <session id='set_tbl' label='Set Jack Table'>
        <repeat counter='t' from='0' to='5'>
          <repeat counter='j' from='0' to='3'>
            <statement>
              <text>set_tbl</text>
              <formula>$t</formula>
              <formula>$j</formula>
            </statement>
          </repeat>
        </repeat>
      </session>
      <session id='tbl_read' label='Resume from Pause'>
        <statement>
          <text>tbl_rw</text>
          <text>1</text>
        </statement>
      </session>
      <session id='tbl_write' label='Resume from Pause'>
        <statement>
          <text>tbl_rw</text>
          <text>2</text>
        </statement>
      </session>
    </commands>
    <status>
      <value format='%04X' id='ecode' label='EXIT CODE'>
        <int ref='ecode'/>
      </value>
      <value format='%s' id='rdy' label='READY'>
        <binary bit='0' ref='x:0'/>
      </value>
      <value format='%s' id='pse' label='PAUSE'>
        <binary bit='1' ref='x:0'/>
      </value>
      <value format='%s' id='emg' label='ENERGENCY'>
        <binary bit='2' ref='x:0'/>
      </value>
      <value format='%s' id='stp' label='STOP'>
        <binary bit='3' ref='x:0'/>
      </value>
      <value format='%s' id='run' label='RUNNING'>
        <binary bit='4' ref='x:0'/>
      </value>
      <value format='%s' id='jak' label='JACKING'>
        <binary bit='5' ref='x:0'/>
      </value>
      <value format='%s' id='con' label='CHARGING'>
        <binary bit='6' ref='x:0'/>
      </value>
      <value format='%s' id='flt' label='Fault'>
        <binary bit='7' ref='x:0'/>
      </value>
      <value format='%s' id='msr' label='Right Motor Servo'>
        <binary bit='8' inv='true' ref='x:0'/>
      </value>
      <value format='%s' id='msl' label='Left Motor Servo'>
        <binary bit='9' inv='true' ref='x:0'/>
      </value>
      <value format='%s' id='jd1' label='Jack Motor1 Servo'>
        <binary bit='10' inv='true' ref='x:0'/>
      </value>
      <value format='%s' id='jd2' label='Jack Motor2 Servo'>
        <binary bit='11' inv='true' ref='x:0'/>
      </value>
      <value format='%s' id='jd3' label='Jack Motor3 Servo'>
        <binary bit='12' inv='true' ref='x:0'/>
      </value>
      <value format='%s' id='jd4' label='Jack Motor4 Servo'>
        <binary bit='13' inv='true' ref='x:0'/>
      </value>
      <value format='%d' id='mdar' label='Rignt Motor D/A'>
        <int ref='x:7' signed='true'/>
      </value>
      <value format='%d' id='mdal' label='Left Motor D/A'>
        <int ref='x:8' signed='true'/>
      </value>
      <value format='%2.2f' id='bvl' label='Battery Voltage'>
        <float decimal='2' ref='x:22'/>
      </value>
      <value format='%d' id='ist' label='Instrument'>
        <int ref='x:23'/>
      </value>
      <value format='%d' id='cpos' label='Current Position'>
        <int ref='x:25'/>
      </value>
      <value format='%d' id='dpos' label='Destination Position'>
        <int ref='x:26'/>
      </value>
      <value format='%d' id='jpos' label='Jack Position'>
        <int ref='x:27'/>
      </value>
    </status>
  </class>
</cdb>
