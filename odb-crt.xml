<?xml version='1.0' encoding='ISO-8859-1'?>
<odb xsi:schemaLocation='http://ciax.sum.naoj.org/ciax-xml/schema/odb.xsd' xmlns='http://ciax.sum.naoj.org/ciax-xml/odb' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'>
  <object id='crt' label='Cart PLC'>
    <comm>
      <device>mel</device>
      <client>socat - udp:cart3:5000</client>
      <server>socat - udp-l:25101,reuseaddr,fork</server>
    </comm>
    <selection>
      <session id='upd' label='Regular status update'>
        <statement format='getstat'/>
        <statement format='chken'/>
      </session>
      <session id='start_run' label='Running Start'>
        <statement format='start 1'/>
      </session>
      <session id='start_jak' label='Jacking Start'>
        <statement format='start 0x100'/>
      </session>
      <session id='clear_trg' label='Jacking Start'>
        <statement format='clear'/>
      </session>
      <session id='set_fwd' label='Set Tag to Forward'>
        <statement format='set_tag 98'/>
      </session>
      <session id='set_run1' label='Run to Tag 1'>
        <statement format='set_tag 1'/>
      </session>
      <session id='set_jak1' label='Jack UP Level 1'>
        <statement format='set_pos 2'/>
      </session>
      <session id='pause' label='Pause'>
        <statement format='stop 1'/>
      </session>
      <session id='emstop' label='Emergency Stop'>
        <statement format='stop 2'/>
      </session>
      <session id='resume' label='Resume from Pause'>
        <statement format='clear'/>
      </session>
      <session id='get_tbl' label='Get Jack Table'>
        <repeat counter='j' from='0' to='3'>
          <repeat counter='t' from='0' to='5'>
            <statement format='get_tbl %s %s'>
              <argv>$j</argv>
              <argv>$t</argv>
            </statement>
          </repeat>
        </repeat>
      </session>
      <session id='read_tbl' label='Read Jack Table to Buffer'>
        <statement format='tbl_rw %s'>
          <argv>1</argv>
        </statement>
        <statement format='tbl_rw %s'>
          <argv>0</argv>
        </statement>
      </session>
      <session id='write_tbl' label='Write Jack Table to Buffer'>
        <statement format='tbl_rw %s'>
          <argv>2</argv>
        </statement>
        <statement format='tbl_rw %s'>
          <argv>0</argv>
        </statement>
      </session>
    </selection>
    <status>
      <group label=''>
        <var id='ecode' label='EXIT CODE' symbol='ecode'>
          <value format='%04X'>
            <int>ecode</int>
          </value>
        </var>
        <var id='rdy' label='READY' symbol='normal'>
          <value format='%s'>
            <binary bit='0'>x:0</binary>
          </value>
        </var>
        <var id='pse' label='PAUSE' symbol='warn'>
          <value format='%s'>
            <binary bit='1'>x:0</binary>
          </value>
        </var>
        <var id='emg' label='ENERGENCY' symbol='alarm'>
          <value format='%s'>
            <binary bit='2'>x:0</binary>
          </value>
        </var>
        <var id='stp' label='STOP' symbol='warn'>
          <value format='%s'>
            <binary bit='3'>x:0</binary>
          </value>
        </var>
      </group>
      <group label=''>
        <var id='run' label='RUNNING' symbol='normal'>
          <value format='%s'>
            <binary bit='4'>x:0</binary>
          </value>
        </var>
        <var id='jak' label='JACKING' symbol='normal'>
          <value format='%s'>
            <binary bit='5'>x:0</binary>
          </value>
        </var>
        <var id='con' label='CHARGING' symbol='normal'>
          <value format='%s'>
            <binary bit='6'>x:0</binary>
          </value>
        </var>
        <var id='flt' label='Fault' symbol='alarm'>
          <value format='%s'>
            <binary bit='7'>x:0</binary>
          </value>
        </var>
      </group>
      <group label=''>
        <var id='msr' label='Right Motor Servo' symbol='normal'>
          <value format='%s'>
            <binary bit='8' inv='true'>x:0</binary>
          </value>
        </var>
        <var id='msl' label='Left Motor Servo' symbol='normal'>
          <value format='%s'>
            <binary bit='9' inv='true'>x:0</binary>
          </value>
        </var>
      </group>
      <group label=''>
        <var id='jd1' label='Jack Motor1 Servo' symbol='normal'>
          <value format='%s'>
            <binary bit='10' inv='true'>x:0</binary>
          </value>
        </var>
        <var id='jd2' label='Jack Motor2 Servo' symbol='normal'>
          <value format='%s'>
            <binary bit='11' inv='true'>x:0</binary>
          </value>
        </var>
      </group>
      <group label=''>
        <var id='jd3' label='Jack Motor3 Servo' symbol='normal'>
          <value format='%s'>
            <binary bit='12' inv='true'>x:0</binary>
          </value>
        </var>
        <var id='jd4' label='Jack Motor4 Servo' symbol='normal'>
          <value format='%s'>
            <binary bit='13' inv='true'>x:0</binary>
          </value>
        </var>
      </group>
      <group label=''>
        <var id='mdar' label='Rignt Motor D/A' symbol='motor'>
          <value format='%d'>
            <int signed='true'>x:7</int>
          </value>
        </var>
        <var id='mdal' label='Left Motor D/A' symbol='motor'>
          <value format='%d'>
            <int signed='true'>x:8</int>
          </value>
        </var>
      </group>
      <group label=''>
        <var id='bvl' label='Battery Voltage' symbol='battery'>
          <value format='%2.2f'>
            <float decimal='2'>x:22</float>
          </value>
        </var>
        <var id='ist' label='Instrument' symbol='inst'>
          <value format='%d'>
            <int>x:23</int>
          </value>
        </var>
      </group>
      <group label=''>
        <var id='cpos' label='Current Position'>
          <value format='%d'>
            <int>x:25</int>
          </value>
        </var>
        <var id='dpos' label='Destination Position'>
          <value format='%d'>
            <int>x:26</int>
          </value>
        </var>
      </group>
      <group label=''>
        <var id='jpos' label='Jack Position' symbol='jpos'>
          <value format='%d'>
            <int>x:27</int>
          </value>
        </var>
      </group>
    </status>
    <symbols>
      <symbol id='ecode' label='ExitCode' type='ENUM'>
        <enum hl='hide' msg='OK'>
          <regexp>0000</regexp>
        </enum>
        <enum hl='alarm' msg='RW Region Error'>
          <regexp>0002</regexp>
        </enum>
        <enum hl='alarm' msg='CMD Code Error'>
          <regexp>0050</regexp>
        </enum>
        <enum hl='alarm' msg='Devide Num Error'>
          <regexp>0056</regexp>
        </enum>
        <enum hl='alarm' msg='Communication Error'>
          <regexp>005B</regexp>
        </enum>
        <enum hl='alarm' msg='CPU Watch timeout Error'>
          <regexp>0060</regexp>
        </enum>
        <enum hl='alarm' msg='Unknown'/>
      </symbol>
      <symbol id='motor' type='INT'>
        <enum hl='alarm' msg='LOW'>
          <range>:10</range>
        </enum>
        <enum hl='normal' msg='OK'>
          <range>10&lt;:30</range>
        </enum>
        <enum hl='alarm' msg='HIGH'>
          <range>30&lt;:</range>
        </enum>
      </symbol>
      <symbol id='battery' type='FLOAT'>
        <enum hl='alarm' msg='LOW'>
          <range>:20</range>
        </enum>
        <enum hl='warn' msg='LESS'>
          <range>20&lt;:22</range>
        </enum>
        <enum hl='normal' msg='OK'>
          <range>22&lt;:26</range>
        </enum>
        <enum hl='warn' msg='FULL'>
          <range>26&lt;:28</range>
        </enum>
        <enum hl='alarm' msg='HIGH'>
          <range>28&lt;:</range>
        </enum>
      </symbol>
      <symbol id='inst' type='ENUM'>
        <enum hl='normal' msg='MOIRCS'>
          <regexp>2</regexp>
        </enum>
        <enum hl='warn' msg='N/A'/>
      </symbol>
      <symbol id='jpos' type='ENUM'>
        <enum hl='normal' msg='D'>
          <regexp>0</regexp>
        </enum>
        <enum hl='normal' msg='1(L)'>
          <regexp>1</regexp>
        </enum>
        <enum hl='normal' msg='2(M)'>
          <regexp>2</regexp>
        </enum>
        <enum hl='normal' msg='3(H)'>
          <regexp>3</regexp>
        </enum>
        <enum hl='normal' msg='CHG'>
          <regexp>4</regexp>
        </enum>
        <enum hl='warn' msg='N/A'/>
      </symbol>
    </symbols>
  </object>
</odb>
