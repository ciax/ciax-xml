<?xml version="1.0" encoding="utf-8"?>
<fdb xmlns="http://ciax.sum.naoj.org/ciax-xml/fdb" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://ciax.sum.naoj.org/ciax-xml/schema/fdb.xsd">
  <frame id="oss" label="OSS Command line">
    <cmdframe xmlns="http://ciax.sum.naoj.org/ciax-xml/fdbc">
      <select>
        <command id="getstat" label="Get all status" response="getstat" type="stat">
          <string label="Status Command">OSSC_screenPrint -R</string>
          <string label="InR Select(NsOpt/NsIR/Cas)"> TSCV.RotatorType</string>
          <string label="Stow pin Status"> CXWS.TSCV.STOW_1</string>
          <string label="Shutter Status"> CXWS.TSCV.SHUTTER</string>
          <string label="AZ/EL Drive Status"> CXWS.TSCV.TELDRIVE</string>
          <string label="EL Angle(deg)"> CXWS.TSCS.EL</string>
          <string label="CIAX-MLP3 Comm Error"> CXWS.TSCV.CIAX_MLP3_FAULT</string>
          <string label="InR Drive ON/OFF"> TSCV.InsRotRotation</string>
          <string label="BOLT Status"> CXWS.TSCV.0_SENSOR</string>
        </command>
        <command id="iststat" label="Get Instrument ID" response="iststat" type="stat">
          <string label="Status Command">OSSC_screenPrint -R</string>
          <string label="CAS Instrument"> CXWS.TSCV.OBE_INR</string>
        </command>
        <command id="jakstat" label="Jack Bolt Status" response="jakstat" type="stat">
          <string label="Status Command">OSSC_screenPrint -R</string>
          <string label="Bolt Each Status"> CXWS.TSCV.POWER_V1</string>
          <string label="Bolt Each Position"> CXWS.TSCV.POWER_V2</string>
          <string label="Zsensor Each Position"> CXWS.TSCL.Z_SENSOR</string>
        </command>
        <command id="inrstat" label="Cas InR Status" response="inrstat" type="stat">
          <string label="Status Command">OSSC_screenPrint -R</string>
          <string label="InR Angle(deg)"> CXWS.TSCS.INSROT</string>
        </command>
        <command id="logstat" label="Login Status" response="logstat" type="stat">
          <string label="Status Command">OSSC_screenPrint -R</string>
          <string label="LOGIN 0"> TSCV.TSC.LOGIN0</string>
          <string label="LOGIN 1"> TSCV.TSC.LOGIN1</string>
          <string label="LOGIN 2"> TSCV.TSC.LOGIN2</string>
          <string label="LOGIN 3"> TSCV.TSC.LOGIN3</string>
        </command>
        <command id="getexit" label="Exit Code" response="exit" type="stat">
          <string>exe</string>
        </command>
        <command id="getpid" label="Running?" response="pid" type="stat">
          <string>exe -b</string>
        </command>
        <command id="login" label="TSC Login" response="exit">
          <string>osscmd</string>
          <string> 1A1901ciax%%%%%%%%%%%%%%%%</string>
          <string> CIAX%%%%%%%%%%%%</string>
          <string> dummyunit</string>
          <string> dummyMenu</string>
          <string> dummyMessage</string>
        </command>
        <command id="logout" label="TSC Login" response="exit">
          <string>osscmd 1A1902</string>
        </command>
        <command id="init" label="Status Delivery Request" response="exit">
          <string>osscmd 1A1011</string>
        </command>
        <command id="tsconly" label="TSC Only Mode(CIAX Mode)" response="exit">
          <string>osscmd 1A1008TSCONLY</string>
        </command>
        <command id="tscpri" label="TSC Primaly Mode(OBS Mode)" response="exit">
          <string>osscmd 1A1008TSCPRI%</string>
        </command>
        <command id="ron" label="InR Drive ON" response="exit">
          <string>osscmd 904013</string>
        </command>
        <command id="roff" label="InR Drive OFF" response="exit">
          <string>osscmd 904014</string>
        </command>
        <command id="jon" label="Jack Drive ON" response="exit">
          <string>osscmd 132001ON%</string>
        </command>
        <command id="joff" label="Jack Drive OFF" response="exit">
          <string>osscmd 132001OFF</string>
        </command>
        <command id="jres" label="Jack Drive Reset" response="exit">
          <string>osscmd 132008</string>
        </command>
        <command id="rhook" label="InR Hook(0deg)" response="exit" type="action">
          <string>osscmd -b 132004</string>
        </command>
        <command id="runhk" label="InR UnHook(-4deg)" response="exit" type="action">
          <string>osscmd -b 132005</string>
        </command>
        <command id="rstop" label="InR Stop" response="exit" type="action">
          <string>osscmd 104011</string>
        </command>
        <command id="ajup" label="All EJB Up" response="exit" type="action">
          <string>osscmd -b 932001</string>
        </command>
        <command id="ajdw" label="All EJB Down" response="exit" type="action">
          <string>osscmd -b 932002</string>
        </command>
        <command id="ajstop" label="All EJB Stop" response="exit" type="action">
          <string>osscmd 104011</string>
        </command>
        <command id="jup" label="EJB Up [#]" response="exit" type="action">
          <string>osscmd -b 9320</string>
          <string format="%02d" valid="1:16">$1*3+1</string>
        </command>
        <command id="jdw" label="EJB Down [#]" response="exit" type="action">
          <string>osscmd -b 9320</string>
          <string format="%02d" valid="1:16">$1*3+2</string>
        </command>
        <command id="jstop" label="EJB Stop [num]" response="exit" type="action">
          <string>osscmd 9320</string>
          <string format="%02d" valid="1:16">$1*3+3</string>
        </command>
        <command id="setinst" label="Set Instrument ID [0-12]" response="exit" type="config">
          <string>osscmd 13200700</string>
          <string format="%02d" valid="1:12">$1</string>
        </command>
      </select>
      <code length="1" label="Suffix">0xa</code>
    </cmdframe>
    <rspframe xmlns="http://ciax.sum.naoj.org/ciax-xml/fdbr" delimiter="\n">
      <select>
        <response id="getstat">
          <!--TSCMON-->
          <field assign="rsel" label="InR Select(NsOpt/NsIR/Cas)" />
          <!--MCUMON-->
          <field assign="stow_1" decode="hexstr" label="Stow pin Status" />
          <field assign="shutter" decode="hexstr" label="Shutter Status" />
          <field assign="teldrive" decode="hexstr" label="AZ/EL Drive Status" />
          <field assign="el" label="EL Angle(deg)" />
          <field assign="mlp3" label="CIAX-MLP3 Comm Error" />
          <field assign="rpw" label="InR Drive ON/OFF" />
          <field assign="bstat" decode="hexstr" label="BOLT System Status" />
        </response>
        <response id="iststat">
          <field assign="iid" label="CAS Instrument" />
        </response>
        <response id="jakstat">
          <!--POWER_V1-->
          <field assign="bsa" label="BOLT SUM ALM(B0)" length="2" decode="hexstr"></field>
          <field assign="abs" label="ALL BOLT STAT(B0:Anchord,B2:Stop,B4:Ready)" length="2" decode="hexstr"></field>
          <!--Order:2,1,4,3..-->
          <array assign="bs" label="EACH BOLT STAT(B0:Anchord,B2:Stop,B4:Ready)" length="1" decode="hexstr">
            <index range="0:15" size="16"></index>
          </array>
          <array assign="bl" label="Each Bolt Limit(DrvAlm,UP,DW,UnitAlm)" length="1" decode="hexstr">
            <!--Order:2,1,4,3..-->
            <index range="0:15" size="16"></index>
          </array>
          <field assign="mba" label="MLP3-BOLT COMM ALM(18:B0)" length="2" decode="hexstr"></field>
          <field assign="loc" label="CS BOLT LOCAL(19:B0)" length="2" decode="hexstr"></field>
          <array assign="clm" label="CS BOLT Cullent Limit(20-21)" length="2" decode="hexstr">
            <index range="0:1" size="2" />
          </array>
          <!--POWER_V2-->
          <array assign="jk" label="Bolt Position" length="12" slice="0:6">
            <index range="0:15" size="16" />
          </array>
          <!--Z_SENSOR-->
          <array assign="zp" label="Zsensor Position" length="12" slice="2:4">
            <index range="0:3" size="4" />
          </array>
        </response>
        <response id="inrstat">
          <field assign="iang" label="InR Angle(deg)" />
        </response>
        <response id="logstat">
          <field assign="login0" label="LOGIN 0" />
          <field assign="login1" label="LOGIN 1" />
          <field assign="login2" label="LOGIN 2" />
          <field assign="login3" label="LOGIN 3" />
        </response>
        <response id="exit">
          <field assign="exit" label="Exit Code" />
        </response>
        <response id="pid">
          <field assign="pid" label="Background Process ID" />
        </response>
      </select>
    </rspframe>
  </frame>
</fdb>
