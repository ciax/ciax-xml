<?xml version="1.0" encoding="utf-8"?>
<mdb xmlns="http://ciax.sum.naoj.org/ciax-xml/mdb">
  <macro id="moircs" version="1" label="MOIRCS Macro" port="55555">
    <group id="gmain" caption="Macro Commands" column="2">
      <item id="l-s" label="LoadMask(WAIT~STOCK)">
        <goal label="On STOCK?" join="all">
          <not site="mma" var="pos" form="msg">N/A</not>
          <equal site="mma" var="abs" form="msg">WAIT</equal>
          <not site="mma" var="pos" form="msg">STOCK</not>
        </goal>
        <check label="On WAIT?">
          <equal site="mfp" var="gv" form="msg">OPEN</equal>
          <equal site="map" var="ch1" form="msg">OK</equal>
          <pattern site="mmc" var="cvs" form="msg">S</pattern>
        </check>
        <mcr async="false" name="l-w">
          <argv>dsi</argv>
        </mcr>
      </item>
      <item id="start" label="StartMask(INIT~STOCK)">
        <goal label="On STOCK?" join="all">
          <not site="mma" var="pos" form="msg">N/A</not>
          <equal site="mma" var="abs" form="msg">WAIT</equal>
          <not site="mma" var="pos" form="msg">STOCK</not>
        </goal>
        <check label="On WAIT?">
          <equal site="mfp" var="gv" form="msg">OPEN</equal>
          <equal site="map" var="ch1" form="msg">OK</equal>
          <pattern site="mmc" var="cvs" form="msg">S</pattern>
        </check>
        <mcr async="false" name="l-w">
          <argv>dsi</argv>
        </mcr>
      </item>
    </group>
  </macro>
</mdb>
