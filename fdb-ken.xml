<?xml version="1.0" encoding="utf-8"?>
<fdb xmlns="http://ciax.sum.naoj.org/ciax-xml/fdb">
  <frame id="ken" version="1" label="Kenwood PW-A Series (IF-41RS)">
    <spec mfr="Kenwood" brand="PW-A Series" model="IF-41RS" reference="http://ciax.sum.naoj.org/man/kenwood/PWA_m_j.pdf"/>
    <stream ccmethod="sum" maxlength="255" stream_ver="5" wait="0.5"/>
    <serial databit="7" flowctl="NONE" parity="EVEN" speed="9600" stopbit="1"/>
    <cmdframe xmlns="http://ciax.sum.naoj.org/ciax-xml/fdbc">
      <char length="1" label="ENQ">5</char>
      <ccrange>
        <body/>
        <char length="1" label="ETX">3</char>
      </ccrange>
      <string format="%02X">${cc}</string>
    </cmdframe>
    <command xmlns="http://ciax.sum.naoj.org/ciax-xml/fdbc">
      <group id="gpr" caption="Protocol">
        <!-- Ack Commands -->
        <item id="ack" label="ACK" noaffix="true" response="ack" type="protocol">
          <char length="1" label="ACK">6</char>
          <string>@</string>
        </item>
        <item id="clr" label="CLEAR ACK" noaffix="true" response="default" type="protocol">
          <char length="1" label="ACK">6</char>
          <string>@</string>
        </item>
        <item id="rcv" label="Rcv Status" response="getstat" type="stat"/>
      </group>
      <group id="gst" caption="Status">
        <!-- Status Commands -->
        <item id="getid" label="Get Unit ID(NEW)" type="stat" response="getstat">
          <par_num>0:2</par_num>
          <char length="1">$1+0x41</char>
          <string>PWID</string>
        </item>
        <item id="getst0" label="Get Status in INT [UNIT] [N of CH]" type="stat" response="getst0">
          <par_num>0:2</par_num>
          <par_num>1:4</par_num>
          <char length="1">$1+0x41</char>
          <string>ST0</string>
        </item>
        <item id="getst1" label="Get Presets(NEW) in INT [UNIT] [N of CH]" type="stat" response="getst1">
          <par_num>0:2</par_num>
          <par_num>1:4</par_num>
          <char length="1">$1+0x41</char>
          <string>ST1</string>
        </item>
        <item id="getst1o" label="Get Presets(OLD) in INT [UNIT] [N of CH]" type="stat" response="getst1o">
          <par_num>0:2</par_num>
          <par_num>1:4</par_num>
          <char length="1">$1+0x41</char>
          <string>ST1</string>
        </item>
        <item id="getst2" label="Get status(NEW) [UNIT] [N of CH]" type="stat" response="getst2">
          <par_num>0:2</par_num>
          <par_num>1:4</par_num>
          <char length="1">$1+0x41</char>
          <string>ST2</string>
        </item>
        <item id="getst2o" label="Get status(OLD) [UNIT] [N of CH]" type="stat" response="getst2o">
          <par_num>0:2</par_num>
          <par_num>1:4</par_num>
          <char length="1">$1+0x41</char>
          <string>ST2</string>
        </item>
        <item id="getst3" label="Get status(NEW) [UNIT]" type="stat" response="getst3">
          <par_num>0:2</par_num>
          <char length="1">$1+0x41</char>
          <string>ST3</string>
        </item>
        <item id="getst4" label="Get Status(NEW) in Float [UNIT] [N of CH]" type="stat" response="getst4">
          <par_num>0:2</par_num>
          <par_num>1:4</par_num>
          <char length="1">$1+0x41</char>
          <string>ST4</string>
        </item>
        <item id="getst5" label="Get Presets(NEW) in Float [UNIT] [N of CH]" type="stat" response="getst5">
          <par_num>0:2</par_num>
          <par_num>1:4</par_num>
          <char length="1">$1+0x41</char>
          <string>ST5</string>
        </item>
      </group>
      <group id="gact" caption="Action">
        <!-- Action Command -->
        <!-- No response if Addr is # -->
        <item id="tron" label="All Tracking ON(NEW)" type="action">
          <string>#TR1</string>
        </item>
        <item id="troff" label="All Tracking OFF(NEW)" type="action">
          <string>#TR0</string>
        </item>
        <item id="aon" label="All Output ON" type="action">
          <string>#SW1</string>
        </item>
        <item id="aoff" label="All Output OFF" type="action">
          <string>#SW0</string>
        </item>
      </group>
    </command>
    <rspframe xmlns="http://ciax.sum.naoj.org/ciax-xml/fdbr">
      <echo/>
      <integer length="1" label="ACK">6</integer>
      <string length="1" label="DST CH"/>
      <integer length="1" label="ENQ">5</integer>
      <ccrange>
        <string label="SRC CH">@</string>
        <body/>
        <integer length="1" label="ETX">3</integer>
      </ccrange>
      <hexstr assign="cc" length="2" label="CC"/>
    </rspframe>
    <response xmlns="http://ciax.sum.naoj.org/ciax-xml/fdbr">
      <item id="ack" noaffix="true">
        <integer label="ACK" length="1">6</integer>
        <string label="Master CH">@</string>
      </item>
      <item id="getstat">
        <string assign="ids" index="$1,*" label="Value" delimiter=","/>
      </item>
      <item id="getst0">
        <string label="StatusCode">MS0,0</string>
        <string label="UNIT #">$1+1</string>
        <string label="Delimiter">,</string>
        <string assign="ms0" index="$1,0:$2-1,2" label="Value" delimiter=","/>
        <hexstr assign="cst" index="$1,*" label="CV/CC Stat" length="1"/>
      </item>
      <item id="getst1">
        <string label="StatusCode">MS1,0</string>
        <string label="UNIT #">$1+1</string>
        <string label="Delimiter">,</string>
        <string assign="ms1" index="$1,*,0:$2*2-2" label="Value" delimiter=","/>
      </item>
      <item id="getst1o">
        <string label="StatusCode">MS1,0</string>
        <string label="UNIT #">$1+1</string>
        <string label="Delimiter">,</string>
        <string assign="ms1" index="$1,*,0:$2*2+2" label="Value" delimiter=","/>
      </item>
      <item id="getst2">
        <string label="StatusCode">MS2,0</string>
        <string label="UNIT #">$1+1</string>
        <string label="Delimiter">,</string>
        <binstr assign="ms2" index="$1,0:1" label="LED/MAIN" delimiter=","/>
        <hexstr assign="st0" index="$1,*,0" label="Output Select CH" length="1"/>
        <string label="Delimiter">,</string>
        <binstr assign="ms2" index="$1,2" label="Track SW" delimiter=","/>
        <string assign="st0" index="$1,*,1" label="Track Select CH" length="1"/>
        <string label="Delimiter">,</string>
        <binstr assign="ms2" index="$1,3" label="Track Mode" delimiter=","/>
        <string assign="st0" index="$1,0:$2-1,2:3" label="Track Values" delimiter=","/>
        <string assign="ms2" index="$1,4:5" label="Preset/Delay" delimiter=","/>
        <string assign="st0" index="$1,0:$2-1,4" label="Delay Times" delimiter=","/>
      </item>
      <item id="getst2o">
        <string label="StatusCode">MS2,0</string>
        <string label="UNIT #">$1+1</string>
        <string label="Delimiter">,</string>
        <string assign="mso" index="$1,0:4" label="Value" delimiter=","/>
      </item>
      <item id="getst3">
        <string label="StatusCode">MS3,0</string>
        <string label="UNIT #">$1+1</string>
        <string label="Delimiter">,</string>
        <string assign="ms3" index="$1" label="Value" delimiter=","/>
      </item>
      <item id="getst4">
        <string label="StatusCode">MS4,0</string>
        <string label="UNIT #">$1+1</string>
        <string label="Delimiter">,</string>
        <string assign="ms4" index="$1,0:$2*2-1" label="Value" delimiter=","/>
        <hexstr assign="st0" index="$1,*,0" label="Stat" length="1"/>
      </item>
      <item id="getst5">
        <string label="StatusCode">MS5,0</string>
        <string label="UNIT #">$1+1</string>
        <string label="Delimiter">,</string>
        <string assign="ms5" index="$1,*" label="Value" delimiter=","/>
      </item>
      <item id="default" noaffix="true"/>
    </response>
    <field xmlns="http://ciax.sum.naoj.org/ciax-xml/fdbr">
      <var id="cc" label="CC"/>
      <array id="ids" label="Value">
        <index size="3"/>
        <index size="5"/>
      </array>
      <array id="cst" label="CV/CC Stat">
        <index size="3"/>
        <index size="4"/>
      </array>
      <array id="ms0" label="Value">
        <index size="3"/>
        <index size="4"/>
        <index size="2"/>
      </array>
      <array id="ms1" label="Value">
        <!--Unit-->
        <index size="3"/>
        <!--Preset-->
        <index size="4"/>
        <!--CH-->
        <index size="11"/>
      </array>
      <array id="ms2" label="Preset/Delay">
        <index size="3"/>
        <index size="6"/>
      </array>
      <array id="ms3" label="Value">
        <index size="3"/>
      </array>
      <array id="ms4" label="Value">
        <index size="3"/>
        <index size="8"/>
      </array>
      <array id="ms5" label="Value">
        <index size="3"/>
        <index size="14"/>
      </array>
      <array id="st0" label="Status">
        <index size="3"/>
        <index size="4"/>
        <index size="5"/>
      </array>
      <array id="mso" label="Value">
        <index size="3"/>
        <index size="5"/>
      </array>
    </field>
  </frame>
</fdb>
