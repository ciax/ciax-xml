<?xml version="1.0" encoding="utf-8"?>
<adb xmlns="http://ciax.sum.naoj.org/ciax-xml/adb">
  <app frm_id="ken" id="ken" label="Kenwood Power Supply">
    <commands xmlns="http://ciax.sum.naoj.org/ciax-xml/adbc">
      <group id="g0" caption="Device">
        <item id="upd" label="Update Status">
          <repeat from="0" to="2" counter="c">
            <frmcmd name="getst0">
              <argv>$c</argv>
              <argv>(($c&amp;1)+1)*2</argv>
            </frmcmd>
            <frmcmd name="ack"/>
          </repeat>
        </item>
        <item id="getconf" label="Get Config Data">
          <repeat from="0" to="2" counter="c">
            <frmcmd name="getst1">
              <argv>$c</argv>
              <argv>(($c&amp;1)+1)*2</argv>
            </frmcmd>
            <frmcmd name="ack"/>
          </repeat>
          <repeat from="0" to="2" counter="c">
            <frmcmd name="getst2">
              <argv>$c</argv>
              <argv>(($c&amp;1)+1)*2</argv>
            </frmcmd>
            <frmcmd name="ack"/>
          </repeat>
          <repeat from="0" to="2" counter="c">
            <frmcmd name="getst3">
              <argv>$c</argv>
            </frmcmd>
            <frmcmd name="ack"/>
          </repeat>
        </item>
      </group>
    </commands>
    <status xmlns="http://ciax.sum.naoj.org/ciax-xml/adbs" symtbl="ken">
      <repeat_grp from="0" to="2" counter="c">
        <group id="gs$c" caption="UNIT $c STAT" column="4">
          <integer id="model$c" label="Model">
            <field ref="ms3" index="$c"/>
          </integer>
          <integer id="disp$c" label="Display">
            <field ref="ms2" index="$c:0"/>
          </integer>
          <integer id="main$c" label="Main Output">
            <field ref="ms2" index="$c:1"/>
          </integer>
          <integer id="tr$c" label="Tracking">
            <field ref="ms2" index="$c:3"/>
          </integer>
          <integer id="trm$c" label="Traking Mode">
            <field ref="ms2" index="$c:5"/>
          </integer>
          <integer id="pre$c" label="Preset Sel">
            <field ref="ms2" index="$c:6"/>
          </integer>
          <integer id="dly$c" label="Delay">
            <field ref="ms2" index="$c:7"/>
          </integer>
        </group>
      </repeat_grp>
      <group id="gu1" caption="Output A" column="3">
        <repeat_var from="0" to="1" counter="c">
          <float id="v0$c" label="Voltage(V) CH$c" format="%5.2f" formula="$#/100">
            <field ref="ms0" index="0:$c:0" />
          </float>
          <float id="i0$c" label="Current(A) CH$c" format="%5.2f" formula="$#/100">
            <field ref="ms0" index="0:$c:1" />
          </float>
          <integer id="s0$c" label="Stat CH$c">
            <field ref="st0" index="0:$c"/>
          </integer>
        </repeat_var>
      </group>
      <group id="gu2" caption="Output B" column="3">
        <repeat_var from="0" to="3" counter="c">
          <float id="v1$c" label="Voltage(V) CH$c" format="%5.2f" formula="$#/100">
            <field ref="ms0" index="1:$c:0" />
          </float>
          <float id="i1$c" label="Current(A) CH$c" format="%5.2f" formula="$#/100">
            <field ref="ms0" index="1:$c:1" />
          </float>
          <integer id="s1$c" label="Stat CH$c">
            <field ref="st0" index="1:$c"/>
          </integer>
        </repeat_var>
      </group>
      <group id="gu3" caption="Output C" column="3">
        <repeat_var from="0" to="1" counter="c">
          <float id="v2$c" label="Voltage(V) CH$c" format="%5.2f" formula="$#/100">
            <field ref="ms0" index="2:$c:0" />
          </float>
          <float id="i2$c" label="Current(A) CH$c" format="%5.2f" formula="$#/100">
            <field ref="ms0" index="2:$c:1" />
          </float>
          <integer id="s2$c" label="Stat CH$c">
            <field ref="st0" index="2:$c"/>
          </integer>
        </repeat_var>
      </group>
      <repeat_grp from="0" to="1" counter="c">
        <group id="gp1$c" caption="Preset UNIT A $cCH" column="4">
          <repeat_var from="0" to="3" counter="p">
            <float id="pv0$c$p" label="#$p (V)" format="%5.2f" formula="$#/100">
              <field ref="ms1" index="0:$p:$c*2" />
            </float>
          </repeat_var>
          <repeat_var from="0" to="3" counter="p">
            <float id="pi0$c$p" label="#$p (A)" format="%5.2f" formula="$#/100">
              <field ref="ms1" index="0:$p:$c*2+1" />
            </float>
          </repeat_var>
        </group>
      </repeat_grp>
      <repeat_grp from="0" to="3" counter="c">
        <group id="gp2$c" caption="Preset UNIT B $cCH" column="4">
          <repeat_var from="0" to="3" counter="p">
            <float id="pv1$c$p" label="#$p (V)" format="%5.2f" formula="$#/100">
              <field ref="ms1" index="1:$p:$c*2" />
            </float>
          </repeat_var>
          <repeat_var from="0" to="3" counter="p">
            <float id="pi1$c$p" label="#$p (A)" format="%5.2f" formula="$#/100">
              <field ref="ms1" index="1:$p:$c*2+1" />
            </float>
          </repeat_var>
        </group>
      </repeat_grp>
      <repeat_grp from="0" to="1" counter="c">
        <group id="gp3$c" caption="Preset UNIT C $cCH" column="4">
          <repeat_var from="0" to="3" counter="p">
            <float id="pv2$c$p" label="#$p (V)" format="%5.2f" formula="$#/100">
              <field ref="ms1" index="2:$p:$c*2" />
            </float>
          </repeat_var>
          <repeat_var from="0" to="3" counter="p">
            <float id="pi2$c$p" label="#$p (A)" format="%5.2f" formula="$#/100">
              <field ref="ms1" index="2:$p:$c*2+1" />
            </float>
          </repeat_var>
        </group>
      </repeat_grp>
      <group id="gd0" caption="Delay UNIT A" column="4">
        <repeat_var from="0" to="1" counter="c">
          <float id="dly0$c" label="Delay (sec)" format="%5.2f" formula="$#/100">
            <field ref="dly2" index="0:$c" />
          </float>
        </repeat_var>
      </group>
      <group id="gd1" caption="Delay UNIT B" column="4">
        <repeat_var from="0" to="3" counter="c">
          <float id="dly1$c" label="Delay (sec)" format="%5.2f" formula="$#/100">
            <field ref="dly2" index="1:$c" />
          </float>
        </repeat_var>
      </group>
      <group id="gd2" caption="Delay UNIT C" column="4">
        <repeat_var from="0" to="1" counter="c">
          <float id="dly2$c" label="Delay (sec)" format="%5.2f" formula="$#/100">
            <field ref="dly2" index="2:$c" />
          </float>
        </repeat_var>
      </group>
      <group id="gt0" caption="Tracking UNIT A" column="4">
        <repeat_var from="0" to="1" counter="c">
          <float id="trv0$c" label="Track $cCH(V)" format="%5.2f" formula="$#/100">
            <field ref="tr2" index="0:$c*2" />
          </float>
          <float id="tri0$c" label="Track $cCH(A)" format="%5.2f" formula="$#/100">
            <field ref="tr2" index="0:$c*2+1" />
          </float>
        </repeat_var>
      </group>
      <group id="gt1" caption="Tracking UNIT B" column="4">
        <repeat_var from="0" to="3" counter="c">
          <float id="trv1$c" label="Track $cCH(V)" format="%5.2f" formula="$#/100">
            <field ref="tr2" index="1:$c" />
          </float>
          <float id="tri1$c" label="Track $cCH(A)" format="%5.2f" formula="$#/100">
            <field ref="tr2" index="1:$c*2+1" />
          </float>
        </repeat_var>
      </group>
      <group id="gt2" caption="Tracking UNIT C" column="4">
        <repeat_var from="0" to="1" counter="c">
          <float id="trv2$c" label="Track $cCH(V)" format="%5.2f" formula="$#/100">
            <field ref="tr2" index="2:$c" />
          </float>
          <float id="tri2$c" label="Track $cCH(A)" format="%5.2f" formula="$#/100">
            <field ref="tr2" index="2:$c*2+1" />
          </float>
        </repeat_var>
      </group>
    </status>
  </app>
</adb>
